<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Advent of Code 2022: Day 9 | erri120's random Blog</title><meta name=keywords content="Advent of Code 2022,C#"><meta name=description content="Day 9: Rope Bridge"><meta name=author content="erri120"><link rel=canonical href=https://erri120.github.io/posts/2022-12-09/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://erri120.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://erri120.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://erri120.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://erri120.github.io/apple-touch-icon.png><link rel=mask-icon href=https://erri120.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta name=google-site-verification content="c-L5KbBKeVyZ9YNKiotqlpl7zsiDRiGcWJa4ZxVpzAo"><meta name=msvalidate.01 content="0E353603CBFC6B4F85D605C4E9F27290"><script data-goatcounter=https://erri120.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<link rel=stylesheet href=/syntax.css><meta property="og:title" content="Advent of Code 2022: Day 9"><meta property="og:description" content="Day 9: Rope Bridge"><meta property="og:type" content="article"><meta property="og:url" content="https://erri120.github.io/posts/2022-12-09/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-09T00:00:00+00:00"><meta property="article:modified_time" content="2022-12-09T12:49:05+01:00"><meta property="og:site_name" content="erri120's random Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Advent of Code 2022: Day 9"><meta name=twitter:description content="Day 9: Rope Bridge"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://erri120.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Advent of Code 2022: Day 9","item":"https://erri120.github.io/posts/2022-12-09/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Advent of Code 2022: Day 9","name":"Advent of Code 2022: Day 9","description":"Day 9: Rope Bridge","keywords":["Advent of Code 2022","C#"],"articleBody":"Day 9 of the Advent of Code. If you have no idea what this is, check my post of the first day.\nDay 9: Rope Bridge Links: Puzzle Page, My Code\nPart One Description This rope bridge creaks as you walk along it. You aren’t sure how old it is, or whether it can even support your weight.\nIt seems to support the Elves just fine, though. The bridge spans a gorge which was carved out by the massive river far below you.\nYou step carefully; as you do, the ropes stretch and twist. You decide to distract yourself by modeling rope physics; maybe you can even figure out where not to step.\nConsider a rope with a knot at each end; these knots mark the head and the tail of the rope. If the head moves far enough away from the tail, the tail is pulled toward the head.\nDue to nebulous reasoning involving Planck lengths, you should be able to model the positions of the knots on a two-dimensional grid. Then, by following a hypothetical series of motions (your puzzle input) for the head, you can determine how the tail will move.\nDue to the aforementioned Planck lengths, the rope must be quite short; in fact, the head (H) and tail (T) must always be touching (diagonally adjacent and even overlapping both count as touching):\n1 2 3 4 5 6 7 8 9 10 11 12 .... .TH. .... .... .H.. ..T. .... ... .H. (H covers T) ... If the head is ever two steps directly up, down, left, or right from the tail, the tail must also move one step in that direction so it remains close enough:\n1 2 3 4 5 6 7 8 9 ..... ..... ..... .TH.. -\u003e .T.H. -\u003e ..TH. ..... ..... ..... ... ... ... .T. .T. ... .H. -\u003e ... -\u003e .T. ... .H. .H. ... ... ... Otherwise, if the head and tail aren’t touching and aren’t in the same row or column, the tail always moves one step diagonally to keep up:\n1 2 3 4 5 6 7 8 9 10 11 ..... ..... ..... ..... ..H.. ..H.. ..H.. -\u003e ..... -\u003e ..T.. .T... .T... ..... ..... ..... ..... ..... ..... ..... ..... ..... ..... ..H.. -\u003e ...H. -\u003e ..TH. .T... .T... ..... ..... ..... ..... You just need to work out where the tail goes as the head follows a series of motions. Assume the head and the tail both start at the same position, overlapping.\nFor example:\nR 4 U 4 L 3 D 1 R 4 D 1 L 5 R 2 This series of motions moves the head right four steps, then up four steps, then left three steps, then down one step, and so on. After each step, you’ll need to update the position of the tail if the step means the head is no longer adjacent to the tail. Visually, these motions occur as follows (s marks the starting position as a reference point):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 == Initial State == ...... ...... ...... ...... H..... (H covers T, s) == R 4 == ...... ...... ...... ...... TH.... (T covers s) ...... ...... ...... ...... sTH... ...... ...... ...... ...... s.TH.. ...... ...... ...... ...... s..TH. == U 4 == ...... ...... ...... ....H. s..T.. ...... ...... ....H. ....T. s..... ...... ....H. ....T. ...... s..... ....H. ....T. ...... ...... s..... == L 3 == ...H.. ....T. ...... ...... s..... ..HT.. ...... ...... ...... s..... .HT... ...... ...... ...... s..... == D 1 == ..T... .H.... ...... ...... s..... == R 4 == ..T... ..H... ...... ...... s..... ..T... ...H.. ...... ...... s..... ...... ...TH. ...... ...... s..... ...... ....TH ...... ...... s..... == D 1 == ...... ....T. .....H ...... s..... == L 5 == ...... ....T. ....H. ...... s..... ...... ....T. ...H.. ...... s..... ...... ...... ..HT.. ...... s..... ...... ...... .HT... ...... s..... ...... ...... HT.... ...... s..... == R 2 == ...... ...... .H.... (H covers T) ...... s..... ...... ...... .TH... ...... s..... After simulating the rope, you can count up all of the positions the tail visited at least once. In this diagram, s again marks the starting position (which the tail also visited) and # marks other positions the tail visited:\nSo, there are 13 positions the tail visited at least once.\nSimulate your complete hypothetical series of motions. How many positions does the tail of the rope visit at least once?\nIf you are like and do these puzzles after waking up, then you might have to re-read the description a couple of times before understanding what’s even going on. Essentially we have two points in 2D space, the head and tail position, and whenever the head moves according to the puzzle input, the tail has to follow.\nLet’s start by modeling our data:\n1 2 3 4 5 6 7 public enum Direction { Right, Left, Up, Down } Once again I’m reaching for a readonly struct to store the motion data.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 public readonly struct Motion { public readonly Direction Direction; public readonly int Steps; public Motion(Direction direction, int steps) { Direction = direction; Steps = steps; } public static Motion FromString(string line) { var sDirection = line[0]; var direction = sDirection switch { 'R' =\u003e Direction.Right, 'L' =\u003e Direction.Left, 'U' =\u003e Direction.Up, 'D' =\u003e Direction.Down, _ =\u003e throw new UnreachableException() }; var count = int.Parse(line[1..]); return new Motion(direction, count); } } Another straightforward thing we can implement right now is updating the head position:\n1 2 3 4 5 6 7 8 9 10 11 private static Vector2 NewHeadPosition(Vector2 current, Direction direction) { return direction switch { Direction.Right =\u003e current with { X = current.X += 1 }, Direction.Left =\u003e current with { X = current.X -= 1 }, Direction.Up =\u003e current with { Y = current.Y += 1 }, Direction.Down =\u003e current with { Y = current.Y -= 1 }, _ =\u003e throw new UnreachableException() }; } This method utilizes some cool .NET features, first I’ve decided to represent the positions as Vector2, there is also Vector3 and Vector4 if you need more dimensions. More interesting than that is the switch expression using Pattern matching we got in C# 7 and 8 and the awesome new with expression from C# 9 and C# 10. Here is how with works with Vector2:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 public void M() { var a = new Vector2(0, 1); var b = a with { X = 100 }; } // gets converted into public void M() { Vector2 vector = new Vector2(0f, 1f); Vector2 vector2 = vector; vector2.X = 100f; Vector2 vector3 = vector2; } You can observe this behavior on SharpLab.\nNow onto the interesting part. How do we update the tail position to follow the head? Let’s make a new method and think about it.\n1 2 3 4 private static Vector2 NewTailPosition(Vector2 tail, Vector2 head) { // ... } The tail only has to move, if it doesn’t touch the head. It can have the same position as the head or be in any adjacent field to the right, left, up, down or diagonally. We can check if the tail is next to the head by calculating the distance between the two points:\n1 2 var d1 = Vector2.Distance(a, b); var d2 = Vector2.DistanceSquared(a, b); Vector2 has two distance methods 1) Vector2.Distance returns the Euclidean distance and Vector2.DistanceSquared return the Euclidean distance squared. The squared distance is faster to compute and always non-negative so exactly what we want:\n1 2 var distance = Vector2.DistanceSquared(head, tail); if (distance \u003c= 2.0f) return tail; tail position is overlapping with the head position: distance = 0 tail position is right, left, up or down of the head position: distance = 1 tail position is diagonally to the head position: distance = 2 These are the three cases we want to cover, and the Euclidean distance squared allows us to check for them easily. We don’t have to update the tail position and can just return it again. More difficult is figuring out the position when the tail is too far away.\nThe head will only move one step at a time meaning we also only have to move the tail one step if we want to catch up. The question is if we need to update the X or Y coordinates or both. You could simply use a bunch of if statements like this:\n1 2 3 4 5 6 var newX = head.X \u003e tail.X ? tail.X + 1 : tail.X - 1; var newY = head.Y \u003e tail.Y ? tail.Y + 1 : tail.Y - 1; if (tail.X != head.X \u0026\u0026 tail.Y == head.Y) return tail with { X = newX }; if (tail.Y != head.Y \u0026\u0026 tail.X == head.X) return tail with { Y = newY }; return new Vector2(newX, newY); This is what a programmer would do. But what would a mathematician come up with? They will look at this problem and abuse the fact that we are working with two points on a 2-dimensional plane:\n1 2 var delta = Vector2.Subtract(head, tail); return new Vector2(tail.X + MathF.Sign(delta.X), tail.Y + MathF.Sign(delta.Y)); First we use Vector2.Subtract to calculate the difference between the two positions. This vector will “point” in the direction we need to move the tail position. Here is an example:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 tail = (0, 0) head = (2, 0) delta = head - tail = (2, 0) newTail = (1, 0) tail = (4, 3) head = (2, 3) delta = head - tail = (-2, 0) newTail = (3, 3) tail = (1, 1) head = (3, 2) delta = head - tail = (2, 1) newTail = (2, 2) The actual values of the difference is not important, the only meaningful thing is whether X or Y is positive or negative, or in other words, what sign they have.\nIn the first example delta = (2, 0) the X component is positive and the correct new position is X+1. The second example has a negative X and to update the tail position we need use X-1. In the final example the head moved diagonally and then sideways, both the X and Y components of the delta is positive, and the tail position has to be updated to X+1 and Y+1. The MathF.Sign method will return the following:\n-1: the input is negative 0: the input is zero 1: the input is positive This is exactly what we need. If one of the components is positive we add 1, if it’s negative we subtract 1 and when it’s 0 we do nothing. This is the final method:\n1 2 3 4 5 6 7 8 private static Vector2 NewTailPosition(Vector2 tail, Vector2 head) { var distance = Vector2.DistanceSquared(head, tail); if (distance \u003c= 2.0f) return tail; var delta = Vector2.Subtract(head, tail); return new Vector2(tail.X + MathF.Sign(delta.X), tail.Y + MathF.Sign(delta.Y)); } Now we have everything we need and can put it all together:\n1 2 3 4 5 6 7 8 9 10 11 12 13 var head = Vector2.Zero; var tail = Vector2.Zero; var visitedPositions = motions.SelectMany(motion =\u003e { return Enumerable.Range(0, motion.Steps) .Select(_ =\u003e { head = NewHeadPosition(head, motion.Direction); tail = NewTailPosition(tail, head); return tail; }); }).Distinct().Count(); A couple interesting things are going on here. Vector2.Zero is the same as writing new Vector2(0, 0). The puzzle requires us to count the number of unique positions of the tail. I initially used Enumerable.Count to count all positions, but that was just me not reading carefully enough. If you want uniqueness you can use Enumerable.Distinct.\nIn order for the head to only do one move at a time, followed by changing the tail position, we need to iterate over the number of steps and not do them all at once. Enumerable.Range has got us covered, but this will now return an IEnumerable which means the outer loop will return an IEnumerable","wordCount":"4134","inLanguage":"en","datePublished":"2022-12-09T00:00:00Z","dateModified":"2022-12-09T12:49:05+01:00","author":{"@type":"Person","name":"erri120"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://erri120.github.io/posts/2022-12-09/"},"publisher":{"@type":"Organization","name":"erri120's random Blog","logo":{"@type":"ImageObject","url":"https://erri120.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://erri120.github.io accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://erri120.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://erri120.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://erri120.github.io/archives/ title=Archive><span>Archive</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://erri120.github.io>Home</a>&nbsp;»&nbsp;<a href=https://erri120.github.io/posts/>Posts</a></div><h1 class=post-title>Advent of Code 2022: Day 9</h1><div class=post-meta><span title='2022-12-09 00:00:00 +0000 UTC'>2022-12-09</span>&nbsp;·&nbsp;20 min&nbsp;·&nbsp;4134 words&nbsp;·&nbsp;erri120&nbsp;|&nbsp;<a href=https://github.com/erri120/erri120.github.io/edit/master/content/posts/2022-12-09.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#part-one>Part One</a></li><li><a href=#part-two>Part Two</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details></div><div class=post-content><p>Day 9 of the <a href=https://adventofcode.com>Advent of Code</a>. If you have no idea what this is, check my <a href=https://erri120.github.io/posts/2022-12-01/>post of the first day</a>.</p><h1 id=day-9-rope-bridge>Day 9: Rope Bridge<a hidden class=anchor aria-hidden=true href=#day-9-rope-bridge>#</a></h1><p>Links: <a href=https://adventofcode.com/2022/day/8>Puzzle Page</a>, <a href=https://github.com/erri120/advent-of-code-2022/tree/master/day-0>My Code</a></p><h2 id=part-one>Part One<a hidden class=anchor aria-hidden=true href=#part-one>#</a></h2><details><summary>Description</summary><p>This rope bridge creaks as you walk along it. You aren&rsquo;t sure how old it is, or whether it can even support your weight.</p><p>It seems to support the Elves just fine, though. The bridge spans a gorge which was carved out by the massive river far below you.</p><p>You step carefully; as you do, the ropes stretch and twist. You decide to distract yourself by modeling rope physics; maybe you can even figure out where <strong>not</strong> to step.</p><p>Consider a rope with a knot at each end; these knots mark the <strong>head</strong> and the <strong>tail</strong> of the rope. If the head moves far enough away from the tail, the tail is pulled toward the head.</p><p>Due to nebulous reasoning involving <a href=https://en.wikipedia.org/wiki/Planck_units#Planck_length>Planck lengths</a>, you should be able to model the positions of the knots on a two-dimensional grid. Then, by following a hypothetical <strong>series of motions</strong> (your puzzle input) for the head, you can determine how the tail will move.</p><p>Due to the aforementioned Planck lengths, the rope must be quite short; in fact, the head (<code>H</code>) and tail (<code>T</code>) must <strong>always be touching</strong> (diagonally adjacent and even overlapping both count as touching):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>....
</span></span><span class=line><span class=cl>.TH.
</span></span><span class=line><span class=cl>....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>....
</span></span><span class=line><span class=cl>.H..
</span></span><span class=line><span class=cl>..T.
</span></span><span class=line><span class=cl>....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>.H. (H covers T)
</span></span><span class=line><span class=cl>...
</span></span></code></pre></td></tr></table></div></div><p>If the head is ever two steps directly up, down, left, or right from the tail, the tail must also move one step in that direction so it remains close enough:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.....    .....    .....
</span></span><span class=line><span class=cl>.TH.. -&gt; .T.H. -&gt; ..TH.
</span></span><span class=line><span class=cl>.....    .....    .....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>...    ...    ...
</span></span><span class=line><span class=cl>.T.    .T.    ...
</span></span><span class=line><span class=cl>.H. -&gt; ... -&gt; .T.
</span></span><span class=line><span class=cl>...    .H.    .H.
</span></span><span class=line><span class=cl>...    ...    ...
</span></span></code></pre></td></tr></table></div></div><p>Otherwise, if the head and tail aren&rsquo;t touching and aren&rsquo;t in the same row or column, the tail always moves one step diagonally to keep up:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.....    .....    .....
</span></span><span class=line><span class=cl>.....    ..H..    ..H..
</span></span><span class=line><span class=cl>..H.. -&gt; ..... -&gt; ..T..
</span></span><span class=line><span class=cl>.T...    .T...    .....
</span></span><span class=line><span class=cl>.....    .....    .....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>.....    .....    .....
</span></span><span class=line><span class=cl>.....    .....    .....
</span></span><span class=line><span class=cl>..H.. -&gt; ...H. -&gt; ..TH.
</span></span><span class=line><span class=cl>.T...    .T...    .....
</span></span><span class=line><span class=cl>.....    .....    .....
</span></span></code></pre></td></tr></table></div></div><p>You just need to work out where the tail goes as the head follows a series of motions. Assume the head and the tail both start at the same position, overlapping.</p><p>For example:</p><pre tabindex=0><code>R 4
U 4
L 3
D 1
R 4
D 1
L 5
R 2
</code></pre><p>This series of motions moves the head <strong>right</strong> four steps, then <strong>up</strong> four steps, then <strong>left</strong> three steps, then <strong>down</strong> one step, and so on. After each step, you&rsquo;ll need to update the position of the tail if the step means the head is no longer adjacent to the tail. Visually, these motions occur as follows (<code>s</code> marks the starting position as a reference point):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>== Initial State ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>H.....  (H covers T, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== R 4 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>TH....  (T covers s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>sTH...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.TH..
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s..TH.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== U 4 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>....H.
</span></span><span class=line><span class=cl>s..T..
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>....H.
</span></span><span class=line><span class=cl>....T.
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>....H.
</span></span><span class=line><span class=cl>....T.
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>....H.
</span></span><span class=line><span class=cl>....T.
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== L 3 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>...H..
</span></span><span class=line><span class=cl>....T.
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>..HT..
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>.HT...
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== D 1 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>..T...
</span></span><span class=line><span class=cl>.H....
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== R 4 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>..T...
</span></span><span class=line><span class=cl>..H...
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>..T...
</span></span><span class=line><span class=cl>...H..
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>...TH.
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>....TH
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== D 1 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>....T.
</span></span><span class=line><span class=cl>.....H
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== L 5 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>....T.
</span></span><span class=line><span class=cl>....H.
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>....T.
</span></span><span class=line><span class=cl>...H..
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>..HT..
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>.HT...
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>HT....
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== R 2 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>.H....  (H covers T)
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>.TH...
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>s.....
</span></span></code></pre></td></tr></table></div></div><p>After simulating the rope, you can count up all of the positions the <strong>tail visited at least once</strong>. In this diagram, <code>s</code> again marks the starting position (which the tail also visited) and <code>#</code> marks other positions the tail visited:</p><p>So, there are <strong><code>13</code></strong> positions the tail visited at least once.</p><p>Simulate your complete hypothetical series of motions. <strong>How many positions does the tail of the rope visit at least once?</strong></p></details><p>If you are like and do these puzzles after waking up, then you might have to re-read the description a couple of times before understanding what&rsquo;s even going on. Essentially we have two points in 2D space, the head and tail position, and whenever the head moves according to the puzzle input, the tail has to follow.</p><p>Let&rsquo;s start by modeling our data:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>public</span> <span class=k>enum</span> <span class=n>Direction</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Right</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>Left</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>Up</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>Down</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Once again I&rsquo;m reaching for a <a href=https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/struct#readonly-struct><code>readonly</code> struct</a> to store the motion data.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>public</span> <span class=k>readonly</span> <span class=k>struct</span> <span class=nc>Motion</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>readonly</span> <span class=n>Direction</span> <span class=n>Direction</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>readonly</span> <span class=kt>int</span> <span class=n>Steps</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=n>Motion</span><span class=p>(</span><span class=n>Direction</span> <span class=n>direction</span><span class=p>,</span> <span class=kt>int</span> <span class=n>steps</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Direction</span> <span class=p>=</span> <span class=n>direction</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Steps</span> <span class=p>=</span> <span class=n>steps</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=n>Motion</span> <span class=n>FromString</span><span class=p>(</span><span class=kt>string</span> <span class=n>line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>sDirection</span> <span class=p>=</span> <span class=n>line</span><span class=p>[</span><span class=m>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>direction</span> <span class=p>=</span> <span class=n>sDirection</span> <span class=k>switch</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=sc>&#39;R&#39;</span> <span class=p>=&gt;</span> <span class=n>Direction</span><span class=p>.</span><span class=n>Right</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=sc>&#39;L&#39;</span> <span class=p>=&gt;</span> <span class=n>Direction</span><span class=p>.</span><span class=n>Left</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=sc>&#39;U&#39;</span> <span class=p>=&gt;</span> <span class=n>Direction</span><span class=p>.</span><span class=n>Up</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=sc>&#39;D&#39;</span> <span class=p>=&gt;</span> <span class=n>Direction</span><span class=p>.</span><span class=n>Down</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>_</span> <span class=p>=&gt;</span> <span class=k>throw</span> <span class=k>new</span> <span class=n>UnreachableException</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>count</span> <span class=p>=</span> <span class=kt>int</span><span class=p>.</span><span class=n>Parse</span><span class=p>(</span><span class=n>line</span><span class=p>[</span><span class=m>1.</span><span class=p>.]);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>Motion</span><span class=p>(</span><span class=n>direction</span><span class=p>,</span> <span class=n>count</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Another straightforward thing we can implement right now is updating the head position:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>private</span> <span class=k>static</span> <span class=n>Vector2</span> <span class=n>NewHeadPosition</span><span class=p>(</span><span class=n>Vector2</span> <span class=n>current</span><span class=p>,</span> <span class=n>Direction</span> <span class=n>direction</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>direction</span> <span class=k>switch</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Direction</span><span class=p>.</span><span class=n>Right</span> <span class=p>=&gt;</span> <span class=n>current</span> <span class=n>with</span> <span class=p>{</span> <span class=n>X</span> <span class=p>=</span> <span class=n>current</span><span class=p>.</span><span class=n>X</span> <span class=p>+=</span> <span class=m>1</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>Direction</span><span class=p>.</span><span class=n>Left</span> <span class=p>=&gt;</span> <span class=n>current</span> <span class=n>with</span> <span class=p>{</span> <span class=n>X</span> <span class=p>=</span> <span class=n>current</span><span class=p>.</span><span class=n>X</span> <span class=p>-=</span> <span class=m>1</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>Direction</span><span class=p>.</span><span class=n>Up</span> <span class=p>=&gt;</span> <span class=n>current</span> <span class=n>with</span> <span class=p>{</span> <span class=n>Y</span> <span class=p>=</span> <span class=n>current</span><span class=p>.</span><span class=n>Y</span> <span class=p>+=</span> <span class=m>1</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>Direction</span><span class=p>.</span><span class=n>Down</span> <span class=p>=&gt;</span> <span class=n>current</span> <span class=n>with</span> <span class=p>{</span> <span class=n>Y</span> <span class=p>=</span> <span class=n>current</span><span class=p>.</span><span class=n>Y</span> <span class=p>-=</span> <span class=m>1</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>_</span> <span class=p>=&gt;</span> <span class=k>throw</span> <span class=k>new</span> <span class=n>UnreachableException</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>This method utilizes some cool .NET features, first I&rsquo;ve decided to represent the positions as <a href=https://learn.microsoft.com/en-us/dotnet/api/system.numerics.vector2><code>Vector2</code></a>, there is also <a href=https://learn.microsoft.com/en-us/dotnet/api/system.numerics.vector3><code>Vector3</code></a> and <a href=https://learn.microsoft.com/en-us/dotnet/api/system.numerics.vector4><code>Vector4</code></a> if you need more dimensions. More interesting than that is the <a href=https://learn.microsoft.com/en-US/dotnet/csharp/language-reference/operators/switch-expression>switch expression</a> using <a href=https://learn.microsoft.com/en-US/dotnet/csharp/language-reference/operators/patterns>Pattern matching</a> we got in C# 7 and 8 and the awesome new <a href=https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/with-expression>with expression</a> from C# 9 and C# 10. Here is how <code>with</code> works with <code>Vector2</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>public</span> <span class=k>void</span> <span class=n>M</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>a</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Vector2</span><span class=p>(</span><span class=m>0</span><span class=p>,</span> <span class=m>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>b</span> <span class=p>=</span> <span class=n>a</span> <span class=n>with</span> <span class=p>{</span> <span class=n>X</span> <span class=p>=</span> <span class=m>100</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// gets converted into</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>void</span> <span class=n>M</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Vector2</span> <span class=n>vector</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Vector2</span><span class=p>(</span><span class=m>0f</span><span class=p>,</span> <span class=m>1f</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Vector2</span> <span class=n>vector2</span> <span class=p>=</span> <span class=n>vector</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>vector2</span><span class=p>.</span><span class=n>X</span> <span class=p>=</span> <span class=m>100f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>Vector2</span> <span class=n>vector3</span> <span class=p>=</span> <span class=n>vector2</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>You can observe this behavior on <a href="https://sharplab.io/#v2:CYLg1APgAgDABFAjAOgHIFcC2BTATgSwGMBnAbgFgAoKAZgQCY4BhOAbyrk4TqgBY4AsgAoAlGw5dJANwCGuODLgBeOADtsAdzgA1bIQAuAe1z0hMADRxEIipUnS5cAEbKFcDfn0ALNnAAarogw8AC+pHASnCFUIUA==">SharpLab</a>.</p><p>Now onto the interesting part. How do we update the tail position to follow the head? Let&rsquo;s make a new method and think about it.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>private</span> <span class=k>static</span> <span class=n>Vector2</span> <span class=n>NewTailPosition</span><span class=p>(</span><span class=n>Vector2</span> <span class=n>tail</span><span class=p>,</span> <span class=n>Vector2</span> <span class=n>head</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>The tail only has to move, if it doesn&rsquo;t touch the head. It can have the same position as the head or be in any adjacent field to the right, left, up, down or diagonally. We can check if the tail is next to the head by calculating the distance between the two points:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>d1</span> <span class=p>=</span> <span class=n>Vector2</span><span class=p>.</span><span class=n>Distance</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>d2</span> <span class=p>=</span> <span class=n>Vector2</span><span class=p>.</span><span class=n>DistanceSquared</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p><code>Vector2</code> has two distance methods 1) <a href=https://learn.microsoft.com/en-us/dotnet/api/system.numerics.vector2.distance><code>Vector2.Distance</code></a> returns the <a href=https://en.wikipedia.org/wiki/Euclidean_distance>Euclidean distance</a> and <a href=https://learn.microsoft.com/en-us/dotnet/api/system.numerics.vector2.distancesquared><code>Vector2.DistanceSquared</code></a> return the <a href=https://en.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance>Euclidean distance squared</a>. The squared distance is faster to compute and always non-negative so exactly what we want:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>distance</span> <span class=p>=</span> <span class=n>Vector2</span><span class=p>.</span><span class=n>DistanceSquared</span><span class=p>(</span><span class=n>head</span><span class=p>,</span> <span class=n>tail</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>distance</span> <span class=p>&lt;=</span> <span class=m>2.0f</span><span class=p>)</span> <span class=k>return</span> <span class=n>tail</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>tail position is overlapping with the head position: distance = 0</li><li>tail position is right, left, up or down of the head position: distance = 1</li><li>tail position is diagonally to the head position: distance = 2</li></ul><p>These are the three cases we want to cover, and the Euclidean distance squared allows us to check for them easily. We don&rsquo;t have to update the tail position and can just return it again. More difficult is figuring out the position when the tail is too far away.</p><p>The head will only move one step at a time meaning we also only have to move the tail one step if we want to catch up. The question is if we need to update the X or Y coordinates or both. You could simply use a bunch of <code>if</code> statements like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>newX</span> <span class=p>=</span> <span class=n>head</span><span class=p>.</span><span class=n>X</span> <span class=p>&gt;</span> <span class=n>tail</span><span class=p>.</span><span class=n>X</span> <span class=p>?</span> <span class=n>tail</span><span class=p>.</span><span class=n>X</span> <span class=p>+</span> <span class=m>1</span> <span class=p>:</span> <span class=n>tail</span><span class=p>.</span><span class=n>X</span> <span class=p>-</span> <span class=m>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>newY</span> <span class=p>=</span> <span class=n>head</span><span class=p>.</span><span class=n>Y</span> <span class=p>&gt;</span> <span class=n>tail</span><span class=p>.</span><span class=n>Y</span> <span class=p>?</span> <span class=n>tail</span><span class=p>.</span><span class=n>Y</span> <span class=p>+</span> <span class=m>1</span> <span class=p>:</span> <span class=n>tail</span><span class=p>.</span><span class=n>Y</span> <span class=p>-</span> <span class=m>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>tail</span><span class=p>.</span><span class=n>X</span> <span class=p>!=</span> <span class=n>head</span><span class=p>.</span><span class=n>X</span> <span class=p>&amp;&amp;</span> <span class=n>tail</span><span class=p>.</span><span class=n>Y</span> <span class=p>==</span> <span class=n>head</span><span class=p>.</span><span class=n>Y</span><span class=p>)</span> <span class=k>return</span> <span class=n>tail</span> <span class=n>with</span> <span class=p>{</span> <span class=n>X</span> <span class=p>=</span> <span class=n>newX</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>tail</span><span class=p>.</span><span class=n>Y</span> <span class=p>!=</span> <span class=n>head</span><span class=p>.</span><span class=n>Y</span> <span class=p>&amp;&amp;</span> <span class=n>tail</span><span class=p>.</span><span class=n>X</span> <span class=p>==</span> <span class=n>head</span><span class=p>.</span><span class=n>X</span><span class=p>)</span> <span class=k>return</span> <span class=n>tail</span> <span class=n>with</span> <span class=p>{</span> <span class=n>Y</span> <span class=p>=</span> <span class=n>newY</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=k>new</span> <span class=n>Vector2</span><span class=p>(</span><span class=n>newX</span><span class=p>,</span> <span class=n>newY</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>This is what a <em>programmer</em> would do. But what would a <em>mathematician</em> come up with? They will look at this problem and abuse the fact that we are working with two points on a 2-dimensional plane:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>delta</span> <span class=p>=</span> <span class=n>Vector2</span><span class=p>.</span><span class=n>Subtract</span><span class=p>(</span><span class=n>head</span><span class=p>,</span> <span class=n>tail</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=k>new</span> <span class=n>Vector2</span><span class=p>(</span><span class=n>tail</span><span class=p>.</span><span class=n>X</span> <span class=p>+</span> <span class=n>MathF</span><span class=p>.</span><span class=n>Sign</span><span class=p>(</span><span class=n>delta</span><span class=p>.</span><span class=n>X</span><span class=p>),</span> <span class=n>tail</span><span class=p>.</span><span class=n>Y</span> <span class=p>+</span> <span class=n>MathF</span><span class=p>.</span><span class=n>Sign</span><span class=p>(</span><span class=n>delta</span><span class=p>.</span><span class=n>Y</span><span class=p>));</span>
</span></span></code></pre></td></tr></table></div></div><p>First we use <a href=https://learn.microsoft.com/en-us/dotnet/api/system.numerics.vector2.subtract><code>Vector2.Subtract</code></a> to calculate the difference between the two positions. This vector will &ldquo;point&rdquo; in the direction we need to move the tail position. Here is an example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>tail = (0, 0)
</span></span><span class=line><span class=cl>head = (2, 0)
</span></span><span class=line><span class=cl>delta = head - tail = (2, 0)
</span></span><span class=line><span class=cl>newTail = (1, 0)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>tail = (4, 3)
</span></span><span class=line><span class=cl>head = (2, 3)
</span></span><span class=line><span class=cl>delta = head - tail = (-2, 0)
</span></span><span class=line><span class=cl>newTail = (3, 3)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>tail = (1, 1)
</span></span><span class=line><span class=cl>head = (3, 2)
</span></span><span class=line><span class=cl>delta = head - tail = (2, 1)
</span></span><span class=line><span class=cl>newTail = (2, 2)
</span></span></code></pre></td></tr></table></div></div><p>The actual values of the difference is not important, the only meaningful thing is whether <code>X</code> or <code>Y</code> is positive or negative, or in other words, what <em>sign</em> they have.</p><ul><li>In the first example <code>delta = (2, 0)</code> the <code>X</code> component is positive and the correct new position is <code>X+1</code>.</li><li>The second example has a negative <code>X</code> and to update the tail position we need use <code>X-1</code>.</li><li>In the final example the head moved diagonally and then sideways, both the <code>X</code> and <code>Y</code> components of the delta is positive, and the tail position has to be updated to <code>X+1</code> and <code>Y+1</code>.</li></ul><p>The <a href=https://learn.microsoft.com/en-us/dotnet/api/System.MathF.Sign><code>MathF.Sign</code></a> method will return the following:</p><ul><li><code>-1</code>: the input is negative</li><li><code>0</code>: the input is zero</li><li><code>1</code>: the input is positive</li></ul><p>This is exactly what we need. If one of the components is positive we add <code>1</code>, if it&rsquo;s negative we subtract <code>1</code> and when it&rsquo;s <code>0</code> we do nothing. This is the final method:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>private</span> <span class=k>static</span> <span class=n>Vector2</span> <span class=n>NewTailPosition</span><span class=p>(</span><span class=n>Vector2</span> <span class=n>tail</span><span class=p>,</span> <span class=n>Vector2</span> <span class=n>head</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>distance</span> <span class=p>=</span> <span class=n>Vector2</span><span class=p>.</span><span class=n>DistanceSquared</span><span class=p>(</span><span class=n>head</span><span class=p>,</span> <span class=n>tail</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>distance</span> <span class=p>&lt;=</span> <span class=m>2.0f</span><span class=p>)</span> <span class=k>return</span> <span class=n>tail</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>delta</span> <span class=p>=</span> <span class=n>Vector2</span><span class=p>.</span><span class=n>Subtract</span><span class=p>(</span><span class=n>head</span><span class=p>,</span> <span class=n>tail</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>new</span> <span class=n>Vector2</span><span class=p>(</span><span class=n>tail</span><span class=p>.</span><span class=n>X</span> <span class=p>+</span> <span class=n>MathF</span><span class=p>.</span><span class=n>Sign</span><span class=p>(</span><span class=n>delta</span><span class=p>.</span><span class=n>X</span><span class=p>),</span> <span class=n>tail</span><span class=p>.</span><span class=n>Y</span> <span class=p>+</span> <span class=n>MathF</span><span class=p>.</span><span class=n>Sign</span><span class=p>(</span><span class=n>delta</span><span class=p>.</span><span class=n>Y</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Now we have everything we need and can put it all together:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>head</span> <span class=p>=</span> <span class=n>Vector2</span><span class=p>.</span><span class=n>Zero</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>tail</span> <span class=p>=</span> <span class=n>Vector2</span><span class=p>.</span><span class=n>Zero</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>visitedPositions</span> <span class=p>=</span> <span class=n>motions</span><span class=p>.</span><span class=n>SelectMany</span><span class=p>(</span><span class=n>motion</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>Enumerable</span><span class=p>.</span><span class=n>Range</span><span class=p>(</span><span class=m>0</span><span class=p>,</span> <span class=n>motion</span><span class=p>.</span><span class=n>Steps</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=n>Select</span><span class=p>(</span><span class=n>_</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>head</span> <span class=p>=</span> <span class=n>NewHeadPosition</span><span class=p>(</span><span class=n>head</span><span class=p>,</span> <span class=n>motion</span><span class=p>.</span><span class=n>Direction</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>tail</span> <span class=p>=</span> <span class=n>NewTailPosition</span><span class=p>(</span><span class=n>tail</span><span class=p>,</span> <span class=n>head</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>tail</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}).</span><span class=n>Distinct</span><span class=p>().</span><span class=n>Count</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><p>A couple interesting things are going on here. <a href=https://learn.microsoft.com/en-us/dotnet/api/system.numerics.vector2.zero><code>Vector2.Zero</code></a> is the same as writing <code>new Vector2(0, 0)</code>. The puzzle requires us to <strong>count</strong> the number of <strong>unique</strong> positions of the tail. I initially used <a href=https://learn.microsoft.com/en-us/dotnet/api/system.linq.enumerable.count><code>Enumerable.Count</code></a> to count <em>all</em> positions, but that was just me not reading carefully enough. If you want uniqueness you can use <a href=https://learn.microsoft.com/en-us/dotnet/api/system.linq.enumerable.distinct><code>Enumerable.Distinct</code></a>.</p><p>In order for the head to only do one move at a time, followed by changing the tail position, we need to iterate over the number of steps and not do them all at once. <a href=https://learn.microsoft.com/en-us/dotnet/api/system.linq.enumerable.range><code>Enumerable.Range</code></a> has got us covered, but this will now return an <code>IEnumerable&lt;Vector2></code> which means the outer loop will return an <code>IEnumerable&lt;IEnumerable&lt;Vector2>></code>. This is where <a href=https://learn.microsoft.com/en-us/dotnet/api/system.linq.enumerable.selectmany><code>Enumerable.SelectMany</code></a> comes into play as it can flatten the sequences into one.</p><h2 id=part-two>Part Two<a hidden class=anchor aria-hidden=true href=#part-two>#</a></h2><details><summary>Description</summary><p>A rope snaps! Suddenly, the river is getting a lot closer than you remember. The bridge is still there, but some of the ropes that broke are now whipping toward you as you fall through the air!</p><p>The ropes are moving too quickly to grab; you only have a few seconds to choose how to arch your body to avoid being hit. Fortunately, your simulation can be extended to support longer ropes.</p><p>Rather than two knots, you now must simulate a rope consisting of <strong>ten</strong> knots. One knot is still the head of the rope and moves according to the series of motions. Each knot further down the rope follows the knot in front of it using the same rules as before.</p><p>Using the same series of motions as the above example, but with the knots marked <code>H</code>, <code>1</code>, <code>2</code>, &mldr;, <code>9</code>, the motions now occur as follows:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>== Initial State ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>H.....  (H covers 1, 2, 3, 4, 5, 6, 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== R 4 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>1H....  (1 covers 2, 3, 4, 5, 6, 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>21H...  (2 covers 3, 4, 5, 6, 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>321H..  (3 covers 4, 5, 6, 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>4321H.  (4 covers 5, 6, 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== U 4 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>....H.
</span></span><span class=line><span class=cl>4321..  (4 covers 5, 6, 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>....H.
</span></span><span class=line><span class=cl>.4321.
</span></span><span class=line><span class=cl>5.....  (5 covers 6, 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>....H.
</span></span><span class=line><span class=cl>....1.
</span></span><span class=line><span class=cl>.432..
</span></span><span class=line><span class=cl>5.....  (5 covers 6, 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>....H.
</span></span><span class=line><span class=cl>....1.
</span></span><span class=line><span class=cl>..432.
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== L 3 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>...H..
</span></span><span class=line><span class=cl>....1.
</span></span><span class=line><span class=cl>..432.
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>..H1..
</span></span><span class=line><span class=cl>...2..
</span></span><span class=line><span class=cl>..43..
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>.H1...
</span></span><span class=line><span class=cl>...2..
</span></span><span class=line><span class=cl>..43..
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== D 1 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>..1...
</span></span><span class=line><span class=cl>.H.2..
</span></span><span class=line><span class=cl>..43..
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== R 4 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>..1...
</span></span><span class=line><span class=cl>..H2..
</span></span><span class=line><span class=cl>..43..
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>..1...
</span></span><span class=line><span class=cl>...H..  (H covers 2)
</span></span><span class=line><span class=cl>..43..
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>...1H.  (1 covers 2)
</span></span><span class=line><span class=cl>..43..
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>...21H
</span></span><span class=line><span class=cl>..43..
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== D 1 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>...21.
</span></span><span class=line><span class=cl>..43.H
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== L 5 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>...21.
</span></span><span class=line><span class=cl>..43H.
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>...21.
</span></span><span class=line><span class=cl>..4H..  (H covers 3)
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>...2..
</span></span><span class=line><span class=cl>..H1..  (H covers 4; 1 covers 3)
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>...2..
</span></span><span class=line><span class=cl>.H13..  (1 covers 4)
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>H123..  (2 covers 4)
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== R 2 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>.H23..  (H covers 1; 2 covers 4)
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>.1H3..  (H covers 2, 4)
</span></span><span class=line><span class=cl>.5....
</span></span><span class=line><span class=cl>6.....  (6 covers 7, 8, 9, s)
</span></span></code></pre></td></tr></table></div></div><p>Now, you need to keep track of the positions the new tail, <code>9</code>, visits. In this example, the tail never moves, and so it only visits <strong><code>1</code></strong> position. However, <strong>be careful</strong>: more types of motion are possible than before, so you might want to visually compare your simulated rope to the one above.</p><p>Here&rsquo;s a larger example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>R 5
</span></span><span class=line><span class=cl>U 8
</span></span><span class=line><span class=cl>L 8
</span></span><span class=line><span class=cl>D 3
</span></span><span class=line><span class=cl>R 17
</span></span><span class=line><span class=cl>D 10
</span></span><span class=line><span class=cl>L 25
</span></span><span class=line><span class=cl>U 20
</span></span></code></pre></td></tr></table></div></div><p>These motions occur as follows (individual steps are not shown):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span><span class=lnt>203
</span><span class=lnt>204
</span><span class=lnt>205
</span><span class=lnt>206
</span><span class=lnt>207
</span><span class=lnt>208
</span><span class=lnt>209
</span><span class=lnt>210
</span><span class=lnt>211
</span><span class=lnt>212
</span><span class=lnt>213
</span><span class=lnt>214
</span><span class=lnt>215
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>== Initial State ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>...........H..............  (H covers 1, 2, 3, 4, 5, 6, 7, 8, 9, s)
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== R 5 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>...........54321H.........  (5 covers 6, 7, 8, 9, s)
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== U 8 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>................H.........
</span></span><span class=line><span class=cl>................1.........
</span></span><span class=line><span class=cl>................2.........
</span></span><span class=line><span class=cl>................3.........
</span></span><span class=line><span class=cl>...............54.........
</span></span><span class=line><span class=cl>..............6...........
</span></span><span class=line><span class=cl>.............7............
</span></span><span class=line><span class=cl>............8.............
</span></span><span class=line><span class=cl>...........9..............  (9 covers s)
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== L 8 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>........H1234.............
</span></span><span class=line><span class=cl>............5.............
</span></span><span class=line><span class=cl>............6.............
</span></span><span class=line><span class=cl>............7.............
</span></span><span class=line><span class=cl>............8.............
</span></span><span class=line><span class=cl>............9.............
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>...........s..............
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== D 3 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>.........2345.............
</span></span><span class=line><span class=cl>........1...6.............
</span></span><span class=line><span class=cl>........H...7.............
</span></span><span class=line><span class=cl>............8.............
</span></span><span class=line><span class=cl>............9.............
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>...........s..............
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== R 17 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>................987654321H
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>...........s..............
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== D 10 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>...........s.........98765
</span></span><span class=line><span class=cl>.........................4
</span></span><span class=line><span class=cl>.........................3
</span></span><span class=line><span class=cl>.........................2
</span></span><span class=line><span class=cl>.........................1
</span></span><span class=line><span class=cl>.........................H
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== L 25 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>...........s..............
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>H123456789................
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>== U 20 ==
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>H.........................
</span></span><span class=line><span class=cl>1.........................
</span></span><span class=line><span class=cl>2.........................
</span></span><span class=line><span class=cl>3.........................
</span></span><span class=line><span class=cl>4.........................
</span></span><span class=line><span class=cl>5.........................
</span></span><span class=line><span class=cl>6.........................
</span></span><span class=line><span class=cl>7.........................
</span></span><span class=line><span class=cl>8.........................
</span></span><span class=line><span class=cl>9.........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>...........s..............
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span></code></pre></td></tr></table></div></div><p>Now, the tail (<code>9</code>) visits <strong><code>36</code></strong> positions (including <code>s</code>) at least once:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>..........................
</span></span><span class=line><span class=cl>#.........................
</span></span><span class=line><span class=cl>#.............###.........
</span></span><span class=line><span class=cl>#............#...#........
</span></span><span class=line><span class=cl>.#..........#.....#.......
</span></span><span class=line><span class=cl>..#..........#.....#......
</span></span><span class=line><span class=cl>...#........#.......#.....
</span></span><span class=line><span class=cl>....#......s.........#....
</span></span><span class=line><span class=cl>.....#..............#.....
</span></span><span class=line><span class=cl>......#............#......
</span></span><span class=line><span class=cl>.......#..........#.......
</span></span><span class=line><span class=cl>........#........#........
</span></span><span class=line><span class=cl>.........########.........
</span></span></code></pre></td></tr></table></div></div><p>Simulate your complete series of motions on a larger rope with ten knots. <strong>How many positions does the tail of the rope visit at least once?</strong></p></details><p>The description for part two is really, but essentially we are now dealing with <strong>10</strong> points that are <strong>linked</strong> together. This is where your basic data structure course from uni comes back to haunt you because this calls for a linked list. However, different from your student days we don&rsquo;t have to create our own linked list, we can just use the .NET <a href=https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.linkedlist-1><code>LinkedList&lt;T></code></a>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>private</span> <span class=k>static</span> <span class=kt>int</span> <span class=n>RunPart</span><span class=p>(</span><span class=n>IEnumerable</span><span class=p>&lt;</span><span class=n>Motion</span><span class=p>&gt;</span> <span class=n>motions</span><span class=p>,</span> <span class=kt>int</span> <span class=n>knotCount</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>linkedList</span> <span class=p>=</span> <span class=k>new</span> <span class=n>LinkedList</span><span class=p>&lt;</span><span class=n>Vector2</span><span class=p>&gt;(</span><span class=n>Enumerable</span><span class=p>.</span><span class=n>Range</span><span class=p>(</span><span class=m>0</span><span class=p>,</span> <span class=n>knotCount</span><span class=p>).</span><span class=n>Select</span><span class=p>(</span><span class=n>_</span> <span class=p>=&gt;</span> <span class=n>Vector2</span><span class=p>.</span><span class=n>Zero</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>visitedPositions</span> <span class=p>=</span> <span class=n>motions</span><span class=p>.</span><span class=n>SelectMany</span><span class=p>(</span><span class=n>motion</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Enumerable</span><span class=p>.</span><span class=n>Range</span><span class=p>(</span><span class=m>0</span><span class=p>,</span> <span class=n>motion</span><span class=p>.</span><span class=n>Steps</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=n>Select</span><span class=p>(</span><span class=n>_</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// ...</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}).</span><span class=n>Distinct</span><span class=p>().</span><span class=n>Count</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>visitedPositions</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>This is almost the same code as before, however instead of having two variables <code>head</code> and <code>tail</code>, we create a <code>LinkedList&lt;T></code> with <code>x</code> amount of zero vectors, and we need to change the code that updates the positions:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>headNode</span> <span class=p>=</span> <span class=n>linkedList</span><span class=p>.</span><span class=n>First</span><span class=p>!;</span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>tailNode</span> <span class=p>=</span> <span class=n>linkedList</span><span class=p>.</span><span class=n>Last</span><span class=p>!;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>newHeadPos</span> <span class=p>=</span> <span class=n>NewHeadPosition</span><span class=p>(</span><span class=n>headNode</span><span class=p>.</span><span class=n>Value</span><span class=p>,</span> <span class=n>motion</span><span class=p>.</span><span class=n>Direction</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>headNode</span><span class=p>.</span><span class=n>Value</span> <span class=p>=</span> <span class=n>newHeadPos</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>UpdateNodes</span><span class=p>(</span><span class=n>headNode</span><span class=p>.</span><span class=n>Next</span><span class=p>!,</span> <span class=n>newHeadPos</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>tailNode</span><span class=p>.</span><span class=n>Value</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>The linked list implementation in .NET can have no elements, in which case <code>linkedList.First</code> and <code>linkedList.Last</code> will be <code>null</code>. Normally you&rsquo;d want to check for nullability but using <code>!</code> at the end we can tell the compiler to trust us and allow this possible <code>null</code> value to be used as a non-null value. The .NET <code>LinkedList&lt;T></code> also wraps the values in a <a href=https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.linkedlistnode-1><code>LinkedListNode&lt;T></code></a>, and we can get and set the value via the <a href=https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.linkedlistnode-1.value><code>Value</code></a> property. What&rsquo;s new with this code is the <code>UpdateNodes</code> method:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>private</span> <span class=k>static</span> <span class=k>void</span> <span class=n>UpdateNodes</span><span class=p>(</span><span class=n>LinkedListNode</span><span class=p>&lt;</span><span class=n>Vector2</span><span class=p>&gt;</span> <span class=n>node</span><span class=p>,</span> <span class=n>Vector2</span> <span class=n>head</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=p>(</span><span class=k>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>node</span><span class=p>.</span><span class=n>Value</span> <span class=p>=</span> <span class=n>NewTailPosition</span><span class=p>(</span><span class=n>node</span><span class=p>.</span><span class=n>Value</span><span class=p>,</span> <span class=n>head</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>node</span><span class=p>.</span><span class=n>Next</span> <span class=k>is</span> <span class=k>null</span><span class=p>)</span> <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>node1</span> <span class=p>=</span> <span class=n>node</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>node</span> <span class=p>=</span> <span class=n>node</span><span class=p>.</span><span class=n>Next</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>head</span> <span class=p>=</span> <span class=n>node1</span><span class=p>.</span><span class=n>Value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>This is where we call <code>NewTailPosition</code> on all nodes after the head. We know that we reached the end when there isn&rsquo;t a next node. Just in case you haven&rsquo;t seen this before: <code>something is null</code> and <code>something is not null</code> is the preferred way of checking if something is null or not. This was added in C# 7 with Pattern matching and should be used instead of <code>something == null</code> and <code>something != null</code>.</p><p>Aside from that, this method is not recursive. The <a href=https://erri120.github.io/posts/2022-12-01/>day before yesterday</a> had a puzzle with recursion so this time I want to fresh things up and show what else you can do. Instead of recursively calling <code>UpdateNodes</code> we can use an endless <code>while</code> loop and just re-assign <code>node</code> and <code>head</code> in each iteration until there isn&rsquo;t a next value. Recursion is an easy way of creating stack overflows and should generally be avoided if possible.</p><p>With that we are done. Here is the final function that works for any positive number of knots, greater than or equal to 2:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>private</span> <span class=k>static</span> <span class=kt>int</span> <span class=n>RunPart</span><span class=p>(</span><span class=n>IEnumerable</span><span class=p>&lt;</span><span class=n>Motion</span><span class=p>&gt;</span> <span class=n>motions</span><span class=p>,</span> <span class=kt>int</span> <span class=n>knotCount</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>linkedList</span> <span class=p>=</span> <span class=k>new</span> <span class=n>LinkedList</span><span class=p>&lt;</span><span class=n>Vector2</span><span class=p>&gt;(</span><span class=n>Enumerable</span><span class=p>.</span><span class=n>Range</span><span class=p>(</span><span class=m>0</span><span class=p>,</span> <span class=n>knotCount</span><span class=p>).</span><span class=n>Select</span><span class=p>(</span><span class=n>_</span> <span class=p>=&gt;</span> <span class=n>Vector2</span><span class=p>.</span><span class=n>Zero</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>visitedPositions</span> <span class=p>=</span> <span class=n>motions</span><span class=p>.</span><span class=n>SelectMany</span><span class=p>(</span><span class=n>motion</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Enumerable</span><span class=p>.</span><span class=n>Range</span><span class=p>(</span><span class=m>0</span><span class=p>,</span> <span class=n>motion</span><span class=p>.</span><span class=n>Steps</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=n>Select</span><span class=p>(</span><span class=n>_</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>var</span> <span class=n>headNode</span> <span class=p>=</span> <span class=n>linkedList</span><span class=p>.</span><span class=n>First</span><span class=p>!;</span>
</span></span><span class=line><span class=cl>                <span class=kt>var</span> <span class=n>tailNode</span> <span class=p>=</span> <span class=n>linkedList</span><span class=p>.</span><span class=n>Last</span><span class=p>!;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=kt>var</span> <span class=n>newHeadPos</span> <span class=p>=</span> <span class=n>NewHeadPosition</span><span class=p>(</span><span class=n>headNode</span><span class=p>.</span><span class=n>Value</span><span class=p>,</span> <span class=n>motion</span><span class=p>.</span><span class=n>Direction</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>headNode</span><span class=p>.</span><span class=n>Value</span> <span class=p>=</span> <span class=n>newHeadPos</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=n>UpdateNodes</span><span class=p>(</span><span class=n>headNode</span><span class=p>.</span><span class=n>Next</span><span class=p>!,</span> <span class=n>newHeadPos</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>tailNode</span><span class=p>.</span><span class=n>Value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}).</span><span class=n>Distinct</span><span class=p>().</span><span class=n>Count</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>visitedPositions</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>Another good puzzle. <a href=https://erri120.github.io/posts/2022-12-08/>Yesterday&rsquo;s puzzle</a> was also really fun, and I&rsquo;m hoping the puzzles will keep getting better and more difficult. Today was a great time to relearn some basic mathematics and get reacquainted with linked list.</p><figure class=align-center><img loading=lazy src=https://i.redd.it/n3w8z5ry9t4a1.png#center alt="Good luck with that rope bridge, suckerrrrr!"><figcaption><p><a href=https://www.reddit.com/r/adventofcode/comments/zgofb1/2022_day_9_good_luck_with_that_rope_bridge/>https://www.reddit.com/r/adventofcode/comments/zgofb1/2022_day_9_good_luck_with_that_rope_bridge/</a></p></figcaption></figure><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube-nocookie.com/embed/_Cy48JYatC8 style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="Dragging a rope around"></iframe></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://erri120.github.io/tags/advent-of-code-2022/>Advent of Code 2022</a></li><li><a href=https://erri120.github.io/tags/c#/>C#</a></li></ul><nav class=paginav><a class=next href=https://erri120.github.io/posts/2022-12-08/><span class=title>Next »</span><br><span>Advent of Code 2022: Day 8</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Advent of Code 2022: Day 9 on twitter" href="https://twitter.com/intent/tweet/?text=Advent%20of%20Code%202022%3a%20Day%209&url=https%3a%2f%2ferri120.github.io%2fposts%2f2022-12-09%2f&hashtags=AdventofCode2022%2cC%23"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Advent of Code 2022: Day 9 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2ferri120.github.io%2fposts%2f2022-12-09%2f&title=Advent%20of%20Code%202022%3a%20Day%209"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></div></footer><script src=https://utteranc.es/client.js repo=erri120/erri120.github.io issue-term=pathname label=site-comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2022 <a href=https://erri120.github.io>erri120's random Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>