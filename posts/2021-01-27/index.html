<!doctype html><html lang=en>
<head>
<title>Utilizing Image Steganography in Games :: erri120's Blog</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Image Steganography is a useful method for hiding data in images. Games can utilize this for character presets so players have an easier time sharing them.">
<meta name=keywords content="Image Steganography,Koikatsu!,コイカツ！,AI Shoujo,AI 少女">
<meta name=robots content="noodp">
<link rel=canonical href=https://erri120.github.io/posts/2021-01-27/>
<link rel=stylesheet href=https://erri120.github.io/assets/style.css>
<link rel=stylesheet href=https://erri120.github.io/assets/organe.css>
<link rel=apple-touch-icon href=https://erri120.github.io/img/apple-touch-icon-192x192.png>
<link rel="shortcut icon" href=https://erri120.github.io/favicon.ico>
<meta name=twitter:card content="summary">
<meta name=twitter:site content="erri120">
<meta name=twitter:creator content="erri120">
<meta property="og:locale" content="en">
<meta property="og:type" content="article">
<meta property="og:title" content="Utilizing Image Steganography in Games">
<meta property="og:description" content="Image Steganography is a useful method for hiding data in images. Games can utilize this for character presets so players have an easier time sharing them.">
<meta property="og:url" content="https://erri120.github.io/posts/2021-01-27/">
<meta property="og:site_name" content="erri120's Blog">
<meta property="og:image" content="https://erri120.github.io/favicon.ico">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">
<meta property="article:published_time" content="2021-01-27 10:08:08 +0100 +0100">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","name":"Utilizing Image Steganography in Games","description":"Image Steganography is a useful method for hiding data in images. Games can utilize this for character presets so players have an easier time sharing them.","author":{"@type":"Person","name":"erri120"},"datePublished":"2021-01-27","headling":"Utilizing Image Steganography in Games","keywords":"Image Steganography, Koikatsu!, コイカツ！, AI Shoujo, AI 少女"}</script>
<link href=/posts/2021-01-27/index.xml rel=alternate type=application/rss+xml title="erri120's Blog">
<meta name=google-site-verification content="c-L5KbBKeVyZ9YNKiotqlpl7zsiDRiGcWJa4ZxVpzAo">
</head>
<body class=organe>
<div class="container center headings--one-size">
<header class=header>
<div class=header__inner>
<div class=header__logo>
<a href=/>
<div class=logo>
erri120's Blog
</div>
</a>
</div>
<div class=menu-trigger>menu</div>
</div>
<nav class=menu>
<ul class="menu__inner menu__inner--desktop">
<li><a href=/about>About</a></li>
</ul>
<ul class="menu__inner menu__inner--mobile">
<li><a href=/about>About</a></li>
</ul>
</nav>
</header>
<div class=content>
<main class=post>
<article>
<h1 class=post-title>
<a href=https://erri120.github.io/posts/2021-01-27/>Utilizing Image Steganography in Games</a></h1>
<div class=post-meta>
<span class=post-date>
<time datetime=2021-01-27>2021-01-27</time>
</span>
<span class=post-author>:: erri120</span>
</div>
<span class=post-tags>
#<a href=https://erri120.github.io/tags/game-development/>Game Development</a>&nbsp;
#<a href=https://erri120.github.io/tags/random-stuff/>Random Stuff</a>&nbsp;
</span>
<div class=post-content><div>
<p>Image Steganography is nothing new or ground-breaking, it existed since 440 BC <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> and digital steganography started appearing once personal computers became a thing. This little post is about the methods used by Illusion for their games &ldquo;Koikatsu!&rdquo; and &ldquo;AI Shoujo&rdquo; and the benefits it provides.</p>
<h2 id=character-presets-and-pngs>Character Presets and PNGs<a href=#character-presets-and-pngs class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>Most games by Illusion are <em>sandboxy</em>, they have an active modding community provide an extensive character creation tool that can export your preset. I come from Skyrim where exporting a character preset created with <a href=https://www.nexusmods.com/skyrimspecialedition/mods/19080>RaceMenu</a> results in a JSON file full of instructions for the mod but not for the user. If you were to just give the JSON file to someone they won&rsquo;t know how the character looks until they start the game and load the preset. This means you have to include screenshots and the JSON file but that makes Discord preset sharing channels very cluttered.</p>
<p>So what does Illusion do? They just give you a single PNG file:</p>
<img src=/img/posts/2021-01-27/Mona.png alt="Mona Preset" class=left>
<p>If you own Koikatsu! then you can just download this image, put it inside your preset folder and it will just work in-game. Of course I immediately opened a my hex editor of choice, <a href=https://mh-nexus.de/en/hxd/>HxD</a>, and looked through the data to find what was going on:</p>
<img src=/img/posts/2021-01-27/preset-in-hxd.png alt="Mona Preset in HxD" class=left>
<p>It turns out that the data for the preset was appended to the end of the PNG. As you can see in the preview above, this does not affect the render in any way because the parser will just stop at the <code>IEND</code> marker. I found out that FFmpeg does not like this extra data at the end and tries to parse another PNG instead of exiting:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>[png @ 000001f2aeb65500] Invalid PNG signature 0x6400000012E38090.
[png @ 000001f2aec0e2c0] Invalid PNG signature 0xE300000081A76C73.
[png @ 000001f2aec11500] Invalid PNG signature 0xA946616365556E64.
[png @ 000001f2aec0fd40] Invalid PNG signature 0xA74579654F766572.
[png @ 000001f2aec10940] Invalid PNG signature 0xD928636F6D2E6765.
[png @ 000001f2aec10140] Invalid PNG signature 0xC2A963745F676C6F.
[png @ 000001f2aec11100] Invalid PNG signature 0xC3AE63745F73686F.
[png @ 000001f2aec10540] Invalid PNG signature 0xCC6001D023D8950.
</code></pre></div><h2 id=rewarding-simplicity>Rewarding Simplicity<a href=#rewarding-simplicity class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>You might think &ldquo;<em>So what&rsquo;s the deal?</em>&rdquo; and that is the point: it is simple to implement and a good solution to the problem of sharing presets, however it is not apparent.</p>
<p>I hope you found this somewhat interesting, if you work on a game that has presets and you don&rsquo;t know how to export them, maybe this has sparked your interest and provided a solution.</p>
<section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p>The first recorded use can be traced back to 440 BC in Greece, see <a href=(https://en.wikipedia.org/wiki/Steganography#History)>Wikipedia</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
</div></div>
</article>
<div class=pagination>
<div class=pagination__title>
<span class=pagination__title-h></span>
<hr>
</div>
<div class=pagination__buttons>
<span class="button previous">
<a href=https://erri120.github.io/posts/2021-02-04/>
<span class=button__icon>←</span>
<span class=button__text>CI/CD for RPG Maker Game Development</span>
</a>
</span>
</div>
</div>
</main>
</div>
<footer class=footer>
<div class=footer__inner>
<div class="copyright copyright--user">
<span>CC BY 4.0</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a> and modified by me</span>
</div>
</div>
</footer>
<script src=https://erri120.github.io/assets/main.js></script>
<script src=https://erri120.github.io/assets/prism.js></script>
</div>
</body>
</html>