<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Reworking rpgmpacker: Moving from C++ to TypeScript | erri120's random Blog</title><meta name=keywords content="Game Development,RPG Maker,CI/CD,C++,TypeScript"><meta name=description content="A quick post explaining my decision of moving from C++ to TypeScript for my project rpgmpacker."><meta name=author content="erri120"><link rel=canonical href=https://erri120.github.io/posts/2021-11-18/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://erri120.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://erri120.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://erri120.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://erri120.github.io/apple-touch-icon.png><link rel=mask-icon href=https://erri120.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta name=google-site-verification content="c-L5KbBKeVyZ9YNKiotqlpl7zsiDRiGcWJa4ZxVpzAo"><meta name=msvalidate.01 content="0E353603CBFC6B4F85D605C4E9F27290"><script data-goatcounter=https://erri120.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<link rel=stylesheet href=/syntax.css><meta property="og:title" content="Reworking rpgmpacker: Moving from C++ to TypeScript"><meta property="og:description" content="A quick post explaining my decision of moving from C++ to TypeScript for my project rpgmpacker."><meta property="og:type" content="article"><meta property="og:url" content="https://erri120.github.io/posts/2021-11-18/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-11-18T00:00:00+00:00"><meta property="article:modified_time" content="2022-11-09T15:47:51+01:00"><meta property="og:site_name" content="erri120's random Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Reworking rpgmpacker: Moving from C++ to TypeScript"><meta name=twitter:description content="A quick post explaining my decision of moving from C++ to TypeScript for my project rpgmpacker."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://erri120.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Reworking rpgmpacker: Moving from C++ to TypeScript","item":"https://erri120.github.io/posts/2021-11-18/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Reworking rpgmpacker: Moving from C++ to TypeScript","name":"Reworking rpgmpacker: Moving from C\u002b\u002b to TypeScript","description":"A quick post explaining my decision of moving from C++ to TypeScript for my project rpgmpacker.","keywords":["Game Development","RPG Maker","CI/CD","C++","TypeScript"],"articleBody":"rpgmpacker has been one of my biggest non-modding related projects on GitHub and the only reason people visit my blog:\nTop queries of my blog\nThe developer of the game Star Knightess Aura (NSFW) is the first actual user of this tool and contributed a good amount of issues on GitHub driving the development of this project forward.\nWith some issues still open I stopped working on this project in April 2021 because I knew I had to rework this tool at some point and didn’t have the motivation to do so at that time. I used C++ for 1.x because I wanted to finally build something with this language. I had only done small assignments in Uni with C++ but never done anything more with it, mainly because the language sucks ass.\nC/C++ is old, very old, and it clearly shows, not just in the language but the tooling available. Ask 20 C++ developers what build system they use, and you will likely get 10 different answers. Working with dependencies is a nightmare when it comes to C/C++ development. It’s actually impossible to count the amount of times I wanted to contribute to a C++ project only to be blocked by some weird build system that only works in a specific environment when the stars align and the moon is in the Waxing Gibbous lunar phase. Once you did get something to work you now have to deal with the language itself. Let me ask you this: how do you represent a string in C++? Did you know that there is std::string which is actually just std::basic_string, std::u16string which is std::basic_string, std::u32string which is std::basic_string and std::wstring which is std::basic_string but don’t let that fool you because there is also char8_t from C++ 20 that introduces std::u8string and don’t forget that wchar_t has different sizes depending on the platform, compiler and time of day?\nC++ is a fucking mess. Working with strings in C++ should not be this hard.\nSo lets calm down and look at something different: Rust. I love Rust, it’s C++ in way better and more modern. I wanted to rework rpgmpacker in Rust and actually did exactly that for quite some time but soon realized this was also not the way.\nRPG Maker MV/MZ is pure JavaScript with the data files being in JSON. The developers are probably familiar with JavaScript as well so considering the ecosystem, it is more fitting to create a JavaScript tool. Of course, I wouldn’t be doing that, fuck vanilla JavaScript, I’m using TypeScript.\nI like to use the right tool for the job. Even though I’m quite the C# and Rust fanatic I went with TypeScript because it makes life very easy. I don’t have to write complex JSON parsers or DTOs, I can just do JSON.parse(...) and access whatever I want. One huge problem was also parsing the plugins for the exclude-unused feature. If you open js/plugins.js in your game, you will find a variable $plugins. With TypeScript I can just use the VM to dynamically load this file and access this variable directly. With any other language I would have to read the file as a string and do some complex string parsing.\nOf course there are some problems with TypeScript. I previously complained about the C++ dependency systems but the huge dependency trees you can get when using NPM are also insane. Before I even started on the rework I set my goal to require the least amount of modules which ended up being only 1: yargs because parsing arguments is not something I want to implement myself.\nI hope the rework will be received pleasantly by the 2 people using the tool.\n","wordCount":"617","inLanguage":"en","datePublished":"2021-11-18T00:00:00Z","dateModified":"2022-11-09T15:47:51+01:00","author":{"@type":"Person","name":"erri120"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://erri120.github.io/posts/2021-11-18/"},"publisher":{"@type":"Organization","name":"erri120's random Blog","logo":{"@type":"ImageObject","url":"https://erri120.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://erri120.github.io accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://erri120.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://erri120.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://erri120.github.io/archives/ title=Archive><span>Archive</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://erri120.github.io>Home</a>&nbsp;»&nbsp;<a href=https://erri120.github.io/posts/>Posts</a></div><h1 class=post-title>Reworking rpgmpacker: Moving from C++ to TypeScript</h1><div class=post-meta><span title='2021-11-18 00:00:00 +0000 UTC'>2021-11-18</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;617 words&nbsp;·&nbsp;erri120&nbsp;|&nbsp;<a href=https://github.com/erri120/erri120.github.io/edit/master/content/posts/2021-11-18.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p><a href=https://github.com/erri120/rpgmpacker>rpgmpacker</a> has been one of my biggest non-modding related projects on GitHub and the only reason people visit my blog:</p><figure class=align-center><img loading=lazy src=/img/posts/2021-11-18/Blog-Performance.png#center alt="Top queries of my blog"><figcaption><p>Top queries of my blog</p></figcaption></figure><p>The developer of the game <a href=https://aura-dev.itch.io/star-knightess-aura>Star Knightess Aura (NSFW)</a> is the first actual user of this tool and contributed a good amount of <a href="https://github.com/erri120/rpgmpacker/issues?q=is%3Aissue+author%3Aauragamedev">issues</a> on GitHub driving the development of this project forward.</p><p>With some issues still open I stopped working on this project in April 2021 because I knew I had to rework this tool at some point and didn&rsquo;t have the motivation to do so at that time. I used C++ for 1.x because I wanted to finally build something with this language. I had only done small assignments in Uni with C++ but never done anything more with it, mainly because the language sucks ass.</p><p>C/C++ is old, very old, and it clearly shows, not just in the language but the tooling available. Ask 20 C++ developers what build system they use, and you will likely get 10 different answers. Working with dependencies is a nightmare when it comes to C/C++ development. It&rsquo;s actually impossible to count the amount of times I wanted to contribute to a C++ project only to be blocked by some weird build system that only works in a specific environment when the stars align and the moon is in the Waxing Gibbous lunar phase. Once you did get something to work you now have to deal with the language itself. Let me ask you this: how do you represent a string in C++? Did you know that there is <code>std::string</code> which is actually just <code>std::basic_string&lt;char></code>, <code>std::u16string</code> which is <code>std::basic_string&lt;char16_t></code>, <code>std::u32string</code> which is <code>std::basic_string&lt;char32_t></code> and <code>std::wstring</code> which is <code>std::basic_string&lt;wchar_t></code> but don&rsquo;t let that fool you because there is also <code>char8_t</code> from C++ 20 that introduces <code>std::u8string</code> and don&rsquo;t forget that <code>wchar_t</code> has different sizes depending on the platform, compiler and time of day?</p><p>C++ is a fucking mess. Working with strings in C++ should not be this hard.</p><p>So lets calm down and look at something different: Rust. I love Rust, it&rsquo;s C++ in way better and more modern. I wanted to rework rpgmpacker in Rust and actually did exactly that for quite some time but soon realized this was also not the way.</p><p>RPG Maker MV/MZ is pure JavaScript with the data files being in JSON. The developers are probably familiar with JavaScript as well so considering the ecosystem, it is more fitting to create a JavaScript tool. Of course, I wouldn&rsquo;t be doing that, fuck vanilla JavaScript, I&rsquo;m using TypeScript.</p><p>I like to use the right tool for the job. Even though I&rsquo;m quite the C# and Rust fanatic I went with TypeScript because it makes life very easy. I don&rsquo;t have to write complex JSON parsers or DTOs, I can just do <code>JSON.parse(...)</code> and access whatever I want. One huge problem was also parsing the plugins for the exclude-unused feature. If you open <code>js/plugins.js</code> in your game, you will find a variable <code>$plugins</code>. With TypeScript I can just use the VM to dynamically load this file and access this variable directly. With any other language I would have to read the file as a string and do some complex string parsing.</p><p>Of course there are some problems with TypeScript. I previously complained about the C++ dependency systems but the huge dependency trees you can get when using NPM are also insane. Before I even started on the rework I set my goal to require the least amount of modules which ended up being only 1: <a href=https://www.npmjs.com/package/yargs>yargs</a> because parsing arguments is not something I want to implement myself.</p><p>I hope the rework will be received pleasantly by the 2 people using the tool.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://erri120.github.io/tags/game-development/>Game Development</a></li><li><a href=https://erri120.github.io/tags/rpg-maker/>RPG Maker</a></li><li><a href=https://erri120.github.io/tags/ci/cd/>CI/CD</a></li><li><a href=https://erri120.github.io/tags/c++/>C++</a></li><li><a href=https://erri120.github.io/tags/typescript/>TypeScript</a></li></ul><nav class=paginav><a class=prev href=https://erri120.github.io/posts/2021-12-10/><span class=title>« Prev</span><br><span>Fixing Anno 2070 by changing three bytes</span></a>
<a class=next href=https://erri120.github.io/posts/2021-09-29/><span class=title>Next »</span><br><span>Don't count frames to calculate time</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Reworking rpgmpacker: Moving from C++ to TypeScript on twitter" href="https://twitter.com/intent/tweet/?text=Reworking%20rpgmpacker%3a%20Moving%20from%20C%2b%2b%20to%20TypeScript&amp;url=https%3a%2f%2ferri120.github.io%2fposts%2f2021-11-18%2f&amp;hashtags=GameDevelopment%2cRPGMaker%2cCI%2fCD%2cC%2b%2b%2cTypeScript"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Reworking rpgmpacker: Moving from C++ to TypeScript on reddit" href="https://reddit.com/submit?url=https%3a%2f%2ferri120.github.io%2fposts%2f2021-11-18%2f&title=Reworking%20rpgmpacker%3a%20Moving%20from%20C%2b%2b%20to%20TypeScript"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></div></footer><script src=https://utteranc.es/client.js repo=erri120/erri120.github.io issue-term=pathname label=site-comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2023 <a href=https://erri120.github.io>erri120's random Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>