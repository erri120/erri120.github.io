<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Advent of Code 2022: Day 7 | erri120's random Blog</title><meta name=keywords content="Advent of Code 2022,C#"><meta name=description content="Day 7: No Space Left On Device"><meta name=author content="erri120"><link rel=canonical href=https://erri120.github.io/posts/2022-12-07/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://erri120.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://erri120.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://erri120.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://erri120.github.io/apple-touch-icon.png><link rel=mask-icon href=https://erri120.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta name=google-site-verification content="c-L5KbBKeVyZ9YNKiotqlpl7zsiDRiGcWJa4ZxVpzAo"><meta name=msvalidate.01 content="0E353603CBFC6B4F85D605C4E9F27290"><script data-goatcounter=https://erri120.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<link rel=stylesheet href=/syntax.css><meta property="og:title" content="Advent of Code 2022: Day 7"><meta property="og:description" content="Day 7: No Space Left On Device"><meta property="og:type" content="article"><meta property="og:url" content="https://erri120.github.io/posts/2022-12-07/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-07T00:00:00+00:00"><meta property="article:modified_time" content="2022-12-07T10:10:00+01:00"><meta property="og:site_name" content="erri120's random Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Advent of Code 2022: Day 7"><meta name=twitter:description content="Day 7: No Space Left On Device"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://erri120.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Advent of Code 2022: Day 7","item":"https://erri120.github.io/posts/2022-12-07/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Advent of Code 2022: Day 7","name":"Advent of Code 2022: Day 7","description":"Day 7: No Space Left On Device","keywords":["Advent of Code 2022","C#"],"articleBody":"Day 7 of the Advent of Code. If you have no idea what this is, check my post of the first day.\nDay 7: No Space Left On Device Links: Puzzle Page, My Code\nPart One Description You can hear birds chirping and raindrops hitting leaves as the expedition proceeds. Occasionally, you can even hear much louder sounds in the distance; how big do the animals get out here, anyway?\nThe device the Elves gave you has problems with more than just its communication system. You try to run a system update:\n1 2 $ system-update --please --pretty-please-with-sugar-on-top Error: No space left on device Perhaps you can delete some files to make space for the update?\nYou browse around the filesystem to assess the situation and save the resulting terminal output (your puzzle input). For example:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 $ cd / $ ls dir a 14848514 b.txt 8504156 c.dat dir d $ cd a $ ls dir e 29116 f 2557 g 62596 h.lst $ cd e $ ls 584 i $ cd .. $ cd .. $ cd d $ ls 4060174 j 8033020 d.log 5626152 d.ext 7214296 k The filesystem consists of a tree of files (plain data) and directories (which can contain other directories or files). The outermost directory is called /. You can navigate around the filesystem, moving into or out of directories and listing the contents of the directory you’re currently in.\nWithin the terminal output, lines that begin with $ are commands you executed, very much like some modern computers:\ncd means change directory. This changes which directory is the current directory, but the specific result depends on the argument: cd x moves in one level: it looks in the current directory for the directory named x and makes it the current directory. cd .. moves out one level: it finds the directory that contains the current directory, then makes that directory the current directory. cd / switches the current directory to the outermost directory, /. ls means list. It prints out all of the files and directories immediately contained by the current directory: 123 abc means that the current directory contains a file named abc with size 123. dir xyz means that the current directory contains a directory named xyz. Given the commands and output in the example above, you can determine that the filesystem looks visually like this:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 - / (dir) - a (dir) - e (dir) - i (file, size=584) - f (file, size=29116) - g (file, size=2557) - h.lst (file, size=62596) - b.txt (file, size=14848514) - c.dat (file, size=8504156) - d (dir) - j (file, size=4060174) - d.log (file, size=8033020) - d.ext (file, size=5626152) - k (file, size=7214296) Here, there are four directories: / (the outermost directory), a and d (which are in /), and e (which is in a). These directories also contain files of various sizes.\nSince the disk is full, your first step should probably be to find directories that are good candidates for deletion. To do this, you need to determine the total size of each directory. The total size of a directory is the sum of the sizes of the files it contains, directly or indirectly. (Directories themselves do not count as having any intrinsic size.)\nThe total sizes of the directories above can be found as follows:\nThe total size of directory e is 584 because it contains a single file i of size 584 and no other directories. The directory a has total size 94853 because it contains files f (size 29116), g (size 2557), and h.lst (size 62596), plus file i indirectly (a contains e which contains i). Directory d has total size 24933642. As the outermost directory, / contains every file. Its total size is 48381165, the sum of the size of every file. To begin, find all of the directories with a total size of at most 100000, then calculate the sum of their total sizes. In the example above, these directories are a and e; the sum of their total sizes is 95437 (94853 + 584). (As in this example, this process can count files more than once!)\nFind all of the directories with a total size of at most 100000. What is the sum of the total sizes of those directories?\nThings are finally starting to get interesting. This problem can be solved in numerous ways, but I decided to go with the simplest solution of building out the filesystem structure with classes and iterating over it with recursion. Because the input is just a list of commands of someone navigating the filesystem, using a dictionary with the path as the key and the entry as the value is another way of doing things.\nWhat does a filesystem have? Directories and Files. You could do something really fancy with inheritance, but this is the most straightforward implementation:\n1 2 3 4 5 6 7 8 9 10 11 public sealed class FileSystem { public DirectoryEntry TopDirectory { get; } public DirectoryEntry CurrentDirectory { get; private set; } public FileSystem() { TopDirectory = new DirectoryEntry(\"/\", null); CurrentDirectory = TopDirectory; } } We will use this FileSystem to track the current directory. Directories have a name, subdirectories, files and a parent directory (unless it’s the top directory):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 public sealed class DirectoryEntry { private readonly List\u003cDirectoryEntry\u003e _subDirectories = new(); private readonly List\u003cFileEntry\u003e _files = new(); public string Name { get; } public DirectoryEntry? Parent { get; } public IEnumerable\u003cDirectoryEntry\u003e SubDirectories =\u003e _subDirectories; public IEnumerable\u003cFileEntry\u003e Files =\u003e _files; public DirectoryEntry(string name, DirectoryEntry? parent) { Name = name; Parent = parent; } public void AddSubDirectory(DirectoryEntry directoryEntry) { _subDirectories.Add(directoryEntry); } public void AddFile(FileEntry fileEntry) { _files.Add(fileEntry); } } Files are much simpler, because they only have a name, a parent directory and a file size:\n1 2 3 4 5 6 7 8 9 10 11 12 13 public sealed class FileEntry { public string Name { get; } public DirectoryEntry Parent { get; } public long Size { get; } public FileEntry(string name, DirectoryEntry parent, long size) { Name = name; Parent = parent; Size = size; } } One thing I want to note here is the use of long. This signed 64-bit integer can range in value from -9,223,372,036,854,775,808 through 9,223,372,036,854,775,807. Assuming that a file size is stored as bytes, the maximum value would be ~9223 Petabytes. This is more than enough for anything this puzzle might throw at us. The .NET class FileInfo also uses long to represent file sizes however other languages such as Rust use usize which is an unsigned 64-bit integer. C# also has ulong, however this type is rarely used because it doesn’t have all APIs available that long has, mainly because it is not CLS-compliant.\nBut enough about integers. We have our data types, now we need to parse the input:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 private static FileSystem BuildFileSystem(IEnumerable\u003cstring\u003e lines) { var fs = new FileSystem(); foreach (var line in lines) { if (line.StartsWith('$')) { var fullCommand = line[2..]; var executable = fullCommand[..2]; switch (executable) { case \"cd\": { var target = fullCommand[3..]; break; } case \"ls\": break; default: throw new UnreachableException(\"aoc doesn't lie\"); } } } return fs; } All commands are prefixed with a dollar sign ($) followed by a space, then the name of the executable, another space and then the arguments: $ cd /. Since there are only two commands (cd and ls) and both are 2 characters long, we can just hardcode this.\nLet’s start with cd or change directory:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 public DirectoryEntry ChangeDirectory(string to) { switch (to) { case \"/\": CurrentDirectory = TopDirectory; break; case \"..\": CurrentDirectory = CurrentDirectory.Parent ?? TopDirectory; break; default: { var subDirectory = CurrentDirectory .SubDirectories .First(dir =\u003e dir.Name.Equals(to, StringComparison.OrdinalIgnoreCase)); CurrentDirectory = subDirectory; break; } } return CurrentDirectory; } We have 3 possible inputs arguments: / will navigate to the top directory, .. will navigate to the parent directory and anything else to a subdirectory.\n1 2 3 4 5 6 case \"cd\": { var target = fullCommand[3..]; fs.ChangeDirectory(target); break; } The ls command is more interesting. In this puzzle, this command is followed by the contents of the current directory. This means the next lines after the command need to be parsed as directory contents, and we have to stop at the next command. A simple running variable keeping track of whether we are parsing directory contents or not is needed:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 var inLs = false; foreach (var line in lines) { if (line.StartsWith('$')) { inLs = false; var fullCommand = line[2..]; var executable = fullCommand[..2]; switch (executable) { case \"cd\": { var target = fullCommand[3..]; fs.ChangeDirectory(target); break; } case \"ls\": inLs = true; break; default: throw new UnreachableException(\"aoc doesn't lie\"); } continue; } if (!inLs) throw new UnreachableException(\"what is this?\"); } As for parsing the output itself, the command will list files and directories. Directories start with a dir and files with their file sizes:\n1 2 3 4 5 6 7 8 9 10 11 12 13 var split = line.Split(' ', StringSplitOptions.TrimEntries | StringSplitOptions.RemoveEmptyEntries); if (split.Length != 2) throw new UnreachableException(\"aoc please don't lie\"); var firstPart = split[0]; if (firstPart == \"dir\") { fs.CurrentDirectory.AddSubDirectory(new DirectoryEntry(split[1], fs.CurrentDirectory)); } else { var fileSize = long.Parse(firstPart); fs.CurrentDirectory.AddFile(new FileEntry(split[1], fs.CurrentDirectory, fileSize)); } With this in place, we can parse the input and create a virtual filesystem. But this isn’t the goal. The goal is to calculate the sum of all directories with a total size of at most 100000. To do this we first need a member method to calculate the size of a directory:\n1 2 3 4 5 6 7 8 9 10 11 12 private long _cachedSize; public long CalculateSize() { if (_cachedSize != 0) return _cachedSize; var subDirectorySizes = _subDirectories .Select(subDir =\u003e subDir.CalculateSize()) .Sum(); _cachedSize = _files.Select(file =\u003e file.Size).Sum() + subDirectorySizes; return _cachedSize; } There is a bit of recursion going on here, and I’ve also opted into using a cache variable because the size won’t change. But this isn’t the only recursion in my code, we also need to iterate over all directories:\n1 2 3 4 5 6 7 8 9 10 11 12 public IEnumerable\u003cDirectoryEntry\u003e EnumerateAllDirectories() { foreach (var subDirectory in _subDirectories) { yield return subDirectory; foreach (var directory in subDirectory.EnumerateAllDirectories()) { yield return directory; } } } Now we have all the pieces required for the puzzle and solve part one:\n1 2 3 4 5 6 7 8 9 10 private static void PartOne(FileSystem fs) { var totalSize = fs.TopDirectory .EnumerateAllDirectories() .Select(dir =\u003e dir.CalculateSize()) .Where(size =\u003e size \u003c= 100000) .Sum(); Console.WriteLine($\"Total Size: {totalSize}\"); } Part Two Description Now, you’re ready to choose a directory to delete.\nThe total disk space available to the filesystem is 70000000. To run the update, you need unused space of at least 30000000. You need to find a directory you can delete that will free up enough space to run the update.\nIn the example above, the total size of the outermost directory (and thus the total amount of used space) is 48381165; this means that the size of the unused space must currently be 21618835, which isn’t quite the 30000000 required by the update. Therefore, the update still requires a directory with total size of at least 8381165 to be deleted before it can run.\nTo achieve this, you have the following options:\nDelete directory e, which would increase unused space by 584. Delete directory a, which would increase unused space by 94853. Delete directory d, which would increase unused space by 24933642. Delete directory /, which would increase unused space by 48381165. Directories e and a are both too small; deleting them would not free up enough space. However, directories d and / are both big enough! Between these, choose the smallest: d, increasing unused space by 24933642.\nFind the smallest directory that, if deleted, would free up enough space on the filesystem to run the update. What is the total size of that directory?\nThere isn’t enough space available for the update, and we need to find the smallest directory that would free up enough space for it. Let’s start by knowing how much that is:\n1 2 3 4 5 6 7 8 9 10 const long maxAvailableSpace = 70000000; const long requiredAvailableSpace = 30000000; var totalSize = fs.TopDirectory.CalculateSize(); var currentAvailableSpace = maxAvailableSpace - totalSize; if (currentAvailableSpace \u003e= requiredAvailableSpace) throw new UnreachableException(\"aoc doesn't lie\"); var currentSpaceRequired = requiredAvailableSpace - currentAvailableSpace; The directory we have to find must be bigger and or equal to currentSpaceRequired. Thankfully we already have everyything we need and can reuse the previous code:\n1 2 3 4 5 6 7 var (dir, size) = fs.TopDirectory .EnumerateAllDirectories() .Select(dir =\u003e (Dir: dir, Size: dir.CalculateSize())) .OrderBy(pair =\u003e pair.Size) .First(pair =\u003e pair.Size \u003e= currentSpaceRequired); Console.WriteLine($\"Directory {dir.Name} needs to be deleted to reclaim {size} bytes\"); Conclusion Yesterday’s puzzle was way too easy, so I’m happy to see something more involving than window sliding. That being said, this puzzle allows for a lot of different solutions and introduces new programmers to recursion.\nhttps://www.reddit.com/r/adventofcode/comments/zettdz/2022_day_7_there_it_is_the_most_dangerous_tree_in/\nhttps://www.reddit.com/r/adventofcode/comments/zeuknv/2022_day_7_the_last_3_days_of_challenges/\n","wordCount":"2300","inLanguage":"en","datePublished":"2022-12-07T00:00:00Z","dateModified":"2022-12-07T10:10:00+01:00","author":{"@type":"Person","name":"erri120"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://erri120.github.io/posts/2022-12-07/"},"publisher":{"@type":"Organization","name":"erri120's random Blog","logo":{"@type":"ImageObject","url":"https://erri120.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://erri120.github.io accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://erri120.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://erri120.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://erri120.github.io/archives/ title=Archive><span>Archive</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://erri120.github.io>Home</a>&nbsp;»&nbsp;<a href=https://erri120.github.io/posts/>Posts</a></div><h1 class=post-title>Advent of Code 2022: Day 7</h1><div class=post-meta><span title='2022-12-07 00:00:00 +0000 UTC'>2022-12-07</span>&nbsp;·&nbsp;11 min&nbsp;·&nbsp;2300 words&nbsp;·&nbsp;erri120&nbsp;|&nbsp;<a href=https://github.com/erri120/erri120.github.io/edit/master/content/posts/2022-12-07.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#part-one>Part One</a></li><li><a href=#part-two>Part Two</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details></div><div class=post-content><p>Day 7 of the <a href=https://adventofcode.com>Advent of Code</a>. If you have no idea what this is, check my <a href=https://erri120.github.io/posts/2022-12-01/>post of the first day</a>.</p><h1 id=day-7-no-space-left-on-device>Day 7: No Space Left On Device<a hidden class=anchor aria-hidden=true href=#day-7-no-space-left-on-device>#</a></h1><p>Links: <a href=https://adventofcode.com/2022/day/7>Puzzle Page</a>, <a href=https://github.com/erri120/advent-of-code-2022/tree/master/day-7>My Code</a></p><h2 id=part-one>Part One<a hidden class=anchor aria-hidden=true href=#part-one>#</a></h2><details><summary>Description</summary><p>You can hear birds chirping and raindrops hitting leaves as the expedition proceeds. Occasionally, you can even hear much louder sounds in the distance; how big do the animals get out here, anyway?</p><p>The device the Elves gave you has problems with more than just its communication system. You try to run a system update:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>$ system-update --please --pretty-please-with-sugar-on-top
</span></span><span class=line><span class=cl>Error: No space left on device
</span></span></code></pre></td></tr></table></div></div><p>Perhaps you can delete some files to make space for the update?</p><p>You browse around the filesystem to assess the situation and save the resulting terminal output (your puzzle input). For example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>$ cd /
</span></span><span class=line><span class=cl>$ ls
</span></span><span class=line><span class=cl>dir a
</span></span><span class=line><span class=cl>14848514 b.txt
</span></span><span class=line><span class=cl>8504156 c.dat
</span></span><span class=line><span class=cl>dir d
</span></span><span class=line><span class=cl>$ cd a
</span></span><span class=line><span class=cl>$ ls
</span></span><span class=line><span class=cl>dir e
</span></span><span class=line><span class=cl>29116 f
</span></span><span class=line><span class=cl>2557 g
</span></span><span class=line><span class=cl>62596 h.lst
</span></span><span class=line><span class=cl>$ cd e
</span></span><span class=line><span class=cl>$ ls
</span></span><span class=line><span class=cl>584 i
</span></span><span class=line><span class=cl>$ cd ..
</span></span><span class=line><span class=cl>$ cd ..
</span></span><span class=line><span class=cl>$ cd d
</span></span><span class=line><span class=cl>$ ls
</span></span><span class=line><span class=cl>4060174 j
</span></span><span class=line><span class=cl>8033020 d.log
</span></span><span class=line><span class=cl>5626152 d.ext
</span></span><span class=line><span class=cl>7214296 k
</span></span></code></pre></td></tr></table></div></div><p>The filesystem consists of a tree of files (plain data) and directories (which can contain other directories or files). The outermost directory is called <code>/</code>. You can navigate around the filesystem, moving into or out of directories and listing the contents of the directory you&rsquo;re currently in.</p><p>Within the terminal output, lines that begin with <code>$</code> are <strong>commands you executed</strong>, very much like some modern computers:</p><ul><li><code>cd</code> means change directory. This changes which directory is the current directory, but the specific result depends on the argument:<ul><li><code>cd x</code> moves <strong>in</strong> one level: it looks in the current directory for the directory named <code>x</code> and makes it the current directory.</li><li><code>cd ..</code> moves <strong>out</strong> one level: it finds the directory that contains the current directory, then makes that directory the current directory.</li><li><code>cd /</code> switches the current directory to the outermost directory, <code>/</code>.</li></ul></li><li><code>ls</code> means <strong>list</strong>. It prints out all of the files and directories immediately contained by the current directory:<ul><li><code>123 abc</code> means that the current directory contains a file named <code>abc</code> with size <code>123</code>.</li><li><code>dir xyz</code> means that the current directory contains a directory named <code>xyz</code>.</li></ul></li></ul><p>Given the commands and output in the example above, you can determine that the filesystem looks visually like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>- / (dir)
</span></span><span class=line><span class=cl>  - a (dir)
</span></span><span class=line><span class=cl>    - e (dir)
</span></span><span class=line><span class=cl>      - i (file, size=584)
</span></span><span class=line><span class=cl>    - f (file, size=29116)
</span></span><span class=line><span class=cl>    - g (file, size=2557)
</span></span><span class=line><span class=cl>    - h.lst (file, size=62596)
</span></span><span class=line><span class=cl>  - b.txt (file, size=14848514)
</span></span><span class=line><span class=cl>  - c.dat (file, size=8504156)
</span></span><span class=line><span class=cl>  - d (dir)
</span></span><span class=line><span class=cl>    - j (file, size=4060174)
</span></span><span class=line><span class=cl>    - d.log (file, size=8033020)
</span></span><span class=line><span class=cl>    - d.ext (file, size=5626152)
</span></span><span class=line><span class=cl>    - k (file, size=7214296)
</span></span></code></pre></td></tr></table></div></div><p>Here, there are four directories: <code>/</code> (the outermost directory), <code>a</code> and <code>d</code> (which are in <code>/</code>), and <code>e</code> (which is in <code>a</code>). These directories also contain files of various sizes.</p><p>Since the disk is full, your first step should probably be to find directories that are good candidates for deletion. To do this, you need to determine the <strong>total size</strong> of each directory. The total size of a directory is the sum of the sizes of the files it contains, directly or indirectly. (Directories themselves do not count as having any intrinsic size.)</p><p>The total sizes of the directories above can be found as follows:</p><ul><li>The total size of directory <code>e</code> is <strong><code>584</code></strong> because it contains a single file i of size 584 and no other directories.</li><li>The directory a has total size <strong><code>94853</code></strong> because it contains files <code>f</code> (size <code>29116</code>), <code>g</code> (size <code>2557</code>), and <code>h.lst</code> (size 62596), plus file i indirectly (<code>a</code> contains <code>e</code> which contains <code>i</code>).</li><li>Directory <code>d</code> has total size <strong><code>24933642</code></strong>.</li><li>As the outermost directory, <code>/</code> contains every file. Its total size is <strong><code>48381165</code></strong>, the sum of the size of every file.</li></ul><p>To begin, find all of the directories with a total size of <strong>at most 100000</strong>, then calculate the sum of their total sizes. In the example above, these directories are <code>a</code> and <code>e</code>; the sum of their total sizes is <strong><code>95437</code></strong> (<code>94853</code> + <code>584</code>). (As in this example, this process can count files more than once!)</p><p>Find all of the directories with a total size of at most 100000. <strong>What is the sum of the total sizes of those directories?</strong></p></details><p>Things are finally starting to get interesting. This problem can be solved in numerous ways, but I decided to go with the simplest solution of building out the filesystem structure with classes and iterating over it with recursion. Because the input is just a list of commands of someone navigating the filesystem, using a dictionary with the path as the key and the entry as the value is another way of doing things.</p><p>What does a filesystem have? Directories and Files. You could do something really fancy with inheritance, but this is the most straightforward implementation:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>public</span> <span class=k>sealed</span> <span class=k>class</span> <span class=nc>FileSystem</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=n>DirectoryEntry</span> <span class=n>TopDirectory</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=n>DirectoryEntry</span> <span class=n>CurrentDirectory</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>private</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=n>FileSystem</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>TopDirectory</span> <span class=p>=</span> <span class=k>new</span> <span class=n>DirectoryEntry</span><span class=p>(</span><span class=s>&#34;/&#34;</span><span class=p>,</span> <span class=k>null</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>CurrentDirectory</span> <span class=p>=</span> <span class=n>TopDirectory</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>We will use this <code>FileSystem</code> to track the current directory. Directories have a name, subdirectories, files and a parent directory (unless it&rsquo;s the top directory):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>public</span> <span class=k>sealed</span> <span class=k>class</span> <span class=nc>DirectoryEntry</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>readonly</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>DirectoryEntry</span><span class=p>&gt;</span> <span class=n>_subDirectories</span> <span class=p>=</span> <span class=k>new</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>readonly</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>FileEntry</span><span class=p>&gt;</span> <span class=n>_files</span> <span class=p>=</span> <span class=k>new</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>string</span> <span class=n>Name</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=n>DirectoryEntry</span><span class=p>?</span> <span class=n>Parent</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=n>IEnumerable</span><span class=p>&lt;</span><span class=n>DirectoryEntry</span><span class=p>&gt;</span> <span class=n>SubDirectories</span> <span class=p>=&gt;</span> <span class=n>_subDirectories</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=n>IEnumerable</span><span class=p>&lt;</span><span class=n>FileEntry</span><span class=p>&gt;</span> <span class=n>Files</span> <span class=p>=&gt;</span> <span class=n>_files</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=n>DirectoryEntry</span><span class=p>(</span><span class=kt>string</span> <span class=n>name</span><span class=p>,</span> <span class=n>DirectoryEntry</span><span class=p>?</span> <span class=n>parent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Name</span> <span class=p>=</span> <span class=n>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Parent</span> <span class=p>=</span> <span class=n>parent</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>void</span> <span class=n>AddSubDirectory</span><span class=p>(</span><span class=n>DirectoryEntry</span> <span class=n>directoryEntry</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>_subDirectories</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>directoryEntry</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>void</span> <span class=n>AddFile</span><span class=p>(</span><span class=n>FileEntry</span> <span class=n>fileEntry</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>_files</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>fileEntry</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Files are much simpler, because they only have a name, a parent directory and a file size:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>public</span> <span class=k>sealed</span> <span class=k>class</span> <span class=nc>FileEntry</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>string</span> <span class=n>Name</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=n>DirectoryEntry</span> <span class=n>Parent</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>long</span> <span class=n>Size</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=n>FileEntry</span><span class=p>(</span><span class=kt>string</span> <span class=n>name</span><span class=p>,</span> <span class=n>DirectoryEntry</span> <span class=n>parent</span><span class=p>,</span> <span class=kt>long</span> <span class=n>size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Name</span> <span class=p>=</span> <span class=n>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Parent</span> <span class=p>=</span> <span class=n>parent</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Size</span> <span class=p>=</span> <span class=n>size</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>One thing I want to note here is the use of <a href=https://learn.microsoft.com/en-us/dotnet/visual-basic/language-reference/data-types/long-data-type><code>long</code></a>. This signed 64-bit integer can range in value from <code>-9,223,372,036,854,775,808</code> through <code>9,223,372,036,854,775,807</code>. Assuming that a file size is stored as bytes, the maximum value would be ~9223 Petabytes. This is more than enough for anything this puzzle might throw at us. The .NET class <a href=https://learn.microsoft.com/en-us/dotnet/api/system.io.fileinfo><code>FileInfo</code></a> also uses <code>long</code> to represent <a href=https://learn.microsoft.com/en-us/dotnet/api/system.io.fileinfo.length>file sizes</a> however other languages such as Rust use <a href=https://doc.rust-lang.org/std/primitive.usize.html><code>usize</code></a> which is an unsigned 64-bit integer. C# also has <code>ulong</code>, however this type is rarely used because it doesn&rsquo;t have all APIs available that <code>long</code> has, mainly because it is not <a href=https://learn.microsoft.com/en-us/dotnet/api/system.uint64#remarks>CLS-compliant</a>.</p><p>But enough about integers. We have our data types, now we need to parse the input:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>private</span> <span class=k>static</span> <span class=n>FileSystem</span> <span class=n>BuildFileSystem</span><span class=p>(</span><span class=n>IEnumerable</span><span class=p>&lt;</span><span class=kt>string</span><span class=p>&gt;</span> <span class=n>lines</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>fs</span> <span class=p>=</span> <span class=k>new</span> <span class=n>FileSystem</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>line</span> <span class=k>in</span> <span class=n>lines</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>line</span><span class=p>.</span><span class=n>StartsWith</span><span class=p>(</span><span class=sc>&#39;$&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>var</span> <span class=n>fullCommand</span> <span class=p>=</span> <span class=n>line</span><span class=p>[</span><span class=m>2.</span><span class=p>.];</span>
</span></span><span class=line><span class=cl>            <span class=kt>var</span> <span class=n>executable</span> <span class=p>=</span> <span class=n>fullCommand</span><span class=p>[..</span><span class=m>2</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>switch</span> <span class=p>(</span><span class=n>executable</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>case</span> <span class=s>&#34;cd&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=kt>var</span> <span class=n>target</span> <span class=p>=</span> <span class=n>fullCommand</span><span class=p>[</span><span class=m>3.</span><span class=p>.];</span>
</span></span><span class=line><span class=cl>                    <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=k>case</span> <span class=s>&#34;ls&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=k>default</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>throw</span> <span class=k>new</span> <span class=n>UnreachableException</span><span class=p>(</span><span class=s>&#34;aoc doesn&#39;t lie&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>fs</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>All commands are prefixed with a dollar sign (<code>$</code>) followed by a space, then the name of the executable, another space and then the arguments: <code>$ cd /</code>. Since there are only two commands (<code>cd</code> and <code>ls</code>) and both are 2 characters long, we can just hardcode this.</p><p>Let&rsquo;s start with <code>cd</code> or <strong>c</strong>hange <strong>d</strong>irectory:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>public</span> <span class=n>DirectoryEntry</span> <span class=n>ChangeDirectory</span><span class=p>(</span><span class=kt>string</span> <span class=n>to</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>switch</span> <span class=p>(</span><span class=n>to</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;/&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>CurrentDirectory</span> <span class=p>=</span> <span class=n>TopDirectory</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;..&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>CurrentDirectory</span> <span class=p>=</span> <span class=n>CurrentDirectory</span><span class=p>.</span><span class=n>Parent</span> <span class=p>??</span> <span class=n>TopDirectory</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>default</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>var</span> <span class=n>subDirectory</span> <span class=p>=</span> <span class=n>CurrentDirectory</span>
</span></span><span class=line><span class=cl>                <span class=p>.</span><span class=n>SubDirectories</span>
</span></span><span class=line><span class=cl>                <span class=p>.</span><span class=n>First</span><span class=p>(</span><span class=n>dir</span> <span class=p>=&gt;</span> <span class=n>dir</span><span class=p>.</span><span class=n>Name</span><span class=p>.</span><span class=n>Equals</span><span class=p>(</span><span class=n>to</span><span class=p>,</span> <span class=n>StringComparison</span><span class=p>.</span><span class=n>OrdinalIgnoreCase</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>CurrentDirectory</span> <span class=p>=</span> <span class=n>subDirectory</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>CurrentDirectory</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>We have 3 possible inputs arguments: <code>/</code> will navigate to the top directory, <code>..</code> will navigate to the parent directory and anything else to a subdirectory.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>case</span> <span class=s>&#34;cd&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>target</span> <span class=p>=</span> <span class=n>fullCommand</span><span class=p>[</span><span class=m>3.</span><span class=p>.];</span>
</span></span><span class=line><span class=cl>    <span class=n>fs</span><span class=p>.</span><span class=n>ChangeDirectory</span><span class=p>(</span><span class=n>target</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>The <code>ls</code> command is more interesting. In this puzzle, this command is followed by the contents of the current directory. This means the next lines after the command need to be parsed as directory contents, and we have to stop at the next command. A simple running variable keeping track of whether we are parsing directory contents or not is needed:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>inLs</span> <span class=p>=</span> <span class=k>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>line</span> <span class=k>in</span> <span class=n>lines</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>line</span><span class=p>.</span><span class=n>StartsWith</span><span class=p>(</span><span class=sc>&#39;$&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>inLs</span> <span class=p>=</span> <span class=k>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>fullCommand</span> <span class=p>=</span> <span class=n>line</span><span class=p>[</span><span class=m>2.</span><span class=p>.];</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>executable</span> <span class=p>=</span> <span class=n>fullCommand</span><span class=p>[..</span><span class=m>2</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=k>switch</span> <span class=p>(</span><span class=n>executable</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>case</span> <span class=s>&#34;cd&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>var</span> <span class=n>target</span> <span class=p>=</span> <span class=n>fullCommand</span><span class=p>[</span><span class=m>3.</span><span class=p>.];</span>
</span></span><span class=line><span class=cl>                <span class=n>fs</span><span class=p>.</span><span class=n>ChangeDirectory</span><span class=p>(</span><span class=n>target</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>case</span> <span class=s>&#34;ls&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>inLs</span> <span class=p>=</span> <span class=k>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>default</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>throw</span> <span class=k>new</span> <span class=n>UnreachableException</span><span class=p>(</span><span class=s>&#34;aoc doesn&#39;t lie&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(!</span><span class=n>inLs</span><span class=p>)</span> <span class=k>throw</span> <span class=k>new</span> <span class=n>UnreachableException</span><span class=p>(</span><span class=s>&#34;what is this?&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>As for parsing the output itself, the command will list files and directories. Directories start with a <code>dir</code> and files with their file sizes:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>split</span> <span class=p>=</span> <span class=n>line</span><span class=p>.</span><span class=n>Split</span><span class=p>(</span><span class=sc>&#39; &#39;</span><span class=p>,</span> <span class=n>StringSplitOptions</span><span class=p>.</span><span class=n>TrimEntries</span> <span class=p>|</span> <span class=n>StringSplitOptions</span><span class=p>.</span><span class=n>RemoveEmptyEntries</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>split</span><span class=p>.</span><span class=n>Length</span> <span class=p>!=</span> <span class=m>2</span><span class=p>)</span> <span class=k>throw</span> <span class=k>new</span> <span class=n>UnreachableException</span><span class=p>(</span><span class=s>&#34;aoc please don&#39;t lie&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>firstPart</span> <span class=p>=</span> <span class=n>split</span><span class=p>[</span><span class=m>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>firstPart</span> <span class=p>==</span> <span class=s>&#34;dir&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>fs</span><span class=p>.</span><span class=n>CurrentDirectory</span><span class=p>.</span><span class=n>AddSubDirectory</span><span class=p>(</span><span class=k>new</span> <span class=n>DirectoryEntry</span><span class=p>(</span><span class=n>split</span><span class=p>[</span><span class=m>1</span><span class=p>],</span> <span class=n>fs</span><span class=p>.</span><span class=n>CurrentDirectory</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>fileSize</span> <span class=p>=</span> <span class=kt>long</span><span class=p>.</span><span class=n>Parse</span><span class=p>(</span><span class=n>firstPart</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>fs</span><span class=p>.</span><span class=n>CurrentDirectory</span><span class=p>.</span><span class=n>AddFile</span><span class=p>(</span><span class=k>new</span> <span class=n>FileEntry</span><span class=p>(</span><span class=n>split</span><span class=p>[</span><span class=m>1</span><span class=p>],</span> <span class=n>fs</span><span class=p>.</span><span class=n>CurrentDirectory</span><span class=p>,</span> <span class=n>fileSize</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>With this in place, we can parse the input and create a virtual filesystem. But this isn&rsquo;t the goal. The goal is to calculate the sum of all directories with a total size of at most <code>100000</code>. To do this we first need a member method to calculate the size of a directory:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>private</span> <span class=kt>long</span> <span class=n>_cachedSize</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=kt>long</span> <span class=n>CalculateSize</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>_cachedSize</span> <span class=p>!=</span> <span class=m>0</span><span class=p>)</span> <span class=k>return</span> <span class=n>_cachedSize</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>subDirectorySizes</span> <span class=p>=</span> <span class=n>_subDirectories</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=n>Select</span><span class=p>(</span><span class=n>subDir</span> <span class=p>=&gt;</span> <span class=n>subDir</span><span class=p>.</span><span class=n>CalculateSize</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=n>Sum</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>_cachedSize</span> <span class=p>=</span> <span class=n>_files</span><span class=p>.</span><span class=n>Select</span><span class=p>(</span><span class=n>file</span> <span class=p>=&gt;</span> <span class=n>file</span><span class=p>.</span><span class=n>Size</span><span class=p>).</span><span class=n>Sum</span><span class=p>()</span> <span class=p>+</span> <span class=n>subDirectorySizes</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>_cachedSize</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>There is a bit of recursion going on here, and I&rsquo;ve also opted into using a cache variable because the size won&rsquo;t change. But this isn&rsquo;t the only recursion in my code, we also need to iterate over all directories:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>public</span> <span class=n>IEnumerable</span><span class=p>&lt;</span><span class=n>DirectoryEntry</span><span class=p>&gt;</span> <span class=n>EnumerateAllDirectories</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>subDirectory</span> <span class=k>in</span> <span class=n>_subDirectories</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>yield</span> <span class=k>return</span> <span class=n>subDirectory</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>directory</span> <span class=k>in</span> <span class=n>subDirectory</span><span class=p>.</span><span class=n>EnumerateAllDirectories</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>yield</span> <span class=k>return</span> <span class=n>directory</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Now we have all the pieces required for the puzzle and solve part one:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>private</span> <span class=k>static</span> <span class=k>void</span> <span class=n>PartOne</span><span class=p>(</span><span class=n>FileSystem</span> <span class=n>fs</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>totalSize</span> <span class=p>=</span> <span class=n>fs</span><span class=p>.</span><span class=n>TopDirectory</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=n>EnumerateAllDirectories</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=n>Select</span><span class=p>(</span><span class=n>dir</span> <span class=p>=&gt;</span> <span class=n>dir</span><span class=p>.</span><span class=n>CalculateSize</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=n>Where</span><span class=p>(</span><span class=n>size</span> <span class=p>=&gt;</span> <span class=n>size</span> <span class=p>&lt;=</span> <span class=m>100000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=n>Sum</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>$&#34;Total Size: {totalSize}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=part-two>Part Two<a hidden class=anchor aria-hidden=true href=#part-two>#</a></h2><details><summary>Description</summary><p>Now, you&rsquo;re ready to choose a directory to delete.</p><p>The total disk space available to the filesystem is <strong><code>70000000</code></strong>. To run the update, you need unused space of at least <strong><code>30000000</code></strong>. You need to find a directory you can delete that will <strong>free up enough space</strong> to run the update.</p><p>In the example above, the total size of the outermost directory (and thus the total amount of used space) is <code>48381165</code>; this means that the size of the <strong>unused</strong> space must currently be <code>21618835</code>, which isn&rsquo;t quite the <code>30000000</code> required by the update. Therefore, the update still requires a directory with total size of at least <code>8381165</code> to be deleted before it can run.</p><p>To achieve this, you have the following options:</p><ul><li>Delete directory <code>e</code>, which would increase unused space by <code>584</code>.</li><li>Delete directory <code>a</code>, which would increase unused space by <code>94853</code>.</li><li>Delete directory <code>d</code>, which would increase unused space by <code>24933642</code>.</li><li>Delete directory <code>/</code>, which would increase unused space by <code>48381165</code>.</li></ul><p>Directories <code>e</code> and <code>a</code> are both too small; deleting them would not free up enough space. However, directories <code>d</code> and <code>/</code> are both big enough! Between these, choose the <strong>smallest</strong>: <code>d</code>, increasing unused space by <strong><code>24933642</code></strong>.</p><p>Find the smallest directory that, if deleted, would free up enough space on the filesystem to run the update. <strong>What is the total size of that directory?</strong></p></details><p>There isn&rsquo;t enough space available for the update, and we need to find the smallest directory that would free up enough space for it. Let&rsquo;s start by knowing how much that is:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>const</span> <span class=kt>long</span> <span class=n>maxAvailableSpace</span> <span class=p>=</span> <span class=m>70000000</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>long</span> <span class=n>requiredAvailableSpace</span> <span class=p>=</span> <span class=m>30000000</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>totalSize</span> <span class=p>=</span> <span class=n>fs</span><span class=p>.</span><span class=n>TopDirectory</span><span class=p>.</span><span class=n>CalculateSize</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>currentAvailableSpace</span> <span class=p>=</span> <span class=n>maxAvailableSpace</span> <span class=p>-</span> <span class=n>totalSize</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>currentAvailableSpace</span> <span class=p>&gt;=</span> <span class=n>requiredAvailableSpace</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>throw</span> <span class=k>new</span> <span class=n>UnreachableException</span><span class=p>(</span><span class=s>&#34;aoc doesn&#39;t lie&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>currentSpaceRequired</span> <span class=p>=</span> <span class=n>requiredAvailableSpace</span> <span class=p>-</span> <span class=n>currentAvailableSpace</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>The directory we have to find must be bigger and or equal to <code>currentSpaceRequired</code>. Thankfully we already have everyything we need and can reuse the previous code:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=p>(</span><span class=n>dir</span><span class=p>,</span> <span class=n>size</span><span class=p>)</span> <span class=p>=</span> <span class=n>fs</span><span class=p>.</span><span class=n>TopDirectory</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=n>EnumerateAllDirectories</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=n>Select</span><span class=p>(</span><span class=n>dir</span> <span class=p>=&gt;</span> <span class=p>(</span><span class=n>Dir</span><span class=p>:</span> <span class=n>dir</span><span class=p>,</span> <span class=n>Size</span><span class=p>:</span> <span class=n>dir</span><span class=p>.</span><span class=n>CalculateSize</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=n>OrderBy</span><span class=p>(</span><span class=n>pair</span> <span class=p>=&gt;</span> <span class=n>pair</span><span class=p>.</span><span class=n>Size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=n>First</span><span class=p>(</span><span class=n>pair</span> <span class=p>=&gt;</span> <span class=n>pair</span><span class=p>.</span><span class=n>Size</span> <span class=p>&gt;=</span> <span class=n>currentSpaceRequired</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>$&#34;Directory {dir.Name} needs to be deleted to reclaim {size} bytes&#34;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p><a href=https://erri120.github.io/posts/2022-12-06/>Yesterday&rsquo;s puzzle</a> was way too easy, so I&rsquo;m happy to see something more involving than window sliding. That being said, this puzzle allows for a lot of different solutions and introduces new programmers to recursion.</p><figure class=align-center><img loading=lazy src=https://i.redd.it/ck64csls3f4a1.png#center alt="There it is, the most dangerous tree in this jungle--the filesystem tree."><figcaption><p><a href=https://www.reddit.com/r/adventofcode/comments/zettdz/2022_day_7_there_it_is_the_most_dangerous_tree_in/>https://www.reddit.com/r/adventofcode/comments/zettdz/2022_day_7_there_it_is_the_most_dangerous_tree_in/</a></p></figcaption></figure><figure class=align-center><img loading=lazy src=https://i.redd.it/eajrcai8cf4a1.png#center alt="The last 3 days of challenges"><figcaption><p><a href=https://www.reddit.com/r/adventofcode/comments/zeuknv/2022_day_7_the_last_3_days_of_challenges/>https://www.reddit.com/r/adventofcode/comments/zeuknv/2022_day_7_the_last_3_days_of_challenges/</a></p></figcaption></figure></div><footer class=post-footer><ul class=post-tags><li><a href=https://erri120.github.io/tags/advent-of-code-2022/>Advent of Code 2022</a></li><li><a href=https://erri120.github.io/tags/c#/>C#</a></li></ul><nav class=paginav><a class=next href=https://erri120.github.io/posts/2022-12-06/><span class=title>Next »</span><br><span>Advent of Code 2022: Day 6</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Advent of Code 2022: Day 7 on twitter" href="https://twitter.com/intent/tweet/?text=Advent%20of%20Code%202022%3a%20Day%207&url=https%3a%2f%2ferri120.github.io%2fposts%2f2022-12-07%2f&hashtags=AdventofCode2022%2cC%23"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Advent of Code 2022: Day 7 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2ferri120.github.io%2fposts%2f2022-12-07%2f&title=Advent%20of%20Code%202022%3a%20Day%207"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></div></footer><script src=https://utteranc.es/client.js repo=erri120/erri120.github.io issue-term=pathname label=site-comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2022 <a href=https://erri120.github.io>erri120's random Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>