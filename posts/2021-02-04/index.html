<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>CI/CD for RPG Maker Game Development | erri120's random Blog</title><meta name=keywords content="Game Development,RPG Maker,CI/CD"><meta name=description content="Are you working on a Game and want to automate your content delivery? RPG Maker MV/MZ have an inbuilt export option but you can't automate it so I created rpgmpacker to help you with that."><meta name=author content="erri120"><link rel=canonical href=https://erri120.github.io/posts/2021-02-04/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://erri120.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://erri120.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://erri120.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://erri120.github.io/apple-touch-icon.png><link rel=mask-icon href=https://erri120.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta name=google-site-verification content="c-L5KbBKeVyZ9YNKiotqlpl7zsiDRiGcWJa4ZxVpzAo"><meta name=msvalidate.01 content="0E353603CBFC6B4F85D605C4E9F27290"><script data-goatcounter=https://erri120.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<link rel=stylesheet href=/syntax.css><meta property="og:title" content="CI/CD for RPG Maker Game Development"><meta property="og:description" content="Are you working on a Game and want to automate your content delivery? RPG Maker MV/MZ have an inbuilt export option but you can't automate it so I created rpgmpacker to help you with that."><meta property="og:type" content="article"><meta property="og:url" content="https://erri120.github.io/posts/2021-02-04/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-02-04T00:00:00+00:00"><meta property="article:modified_time" content="2022-11-29T13:34:42+01:00"><meta property="og:site_name" content="erri120's random Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="CI/CD for RPG Maker Game Development"><meta name=twitter:description content="Are you working on a Game and want to automate your content delivery? RPG Maker MV/MZ have an inbuilt export option but you can't automate it so I created rpgmpacker to help you with that."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://erri120.github.io/posts/"},{"@type":"ListItem","position":3,"name":"CI/CD for RPG Maker Game Development","item":"https://erri120.github.io/posts/2021-02-04/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"CI/CD for RPG Maker Game Development","name":"CI\/CD for RPG Maker Game Development","description":"Are you working on a Game and want to automate your content delivery? RPG Maker MV/MZ have an inbuilt export option but you can't automate it so I created rpgmpacker to help you with that.","keywords":["Game Development","RPG Maker","CI/CD"],"articleBody":"Automation saves time and therefore money. However, you have to ask yourself if it’s worth spending hours writing a complex and long script. In the worst case you might end up wasting instead of saving time. Thankfully most programming related tasks can be automated very quickly and each language or framework often has documentation on how to get you up and running.\nThis is sadly not often the case when it comes to game development. Popular engines like Unreal Engine and Unity have automation tools1 and documentation for automating the build process but less popular ones such as RPG Maker don’t have those.\nIn this post I will explain what CI/CD means and how to set up a pipeline for RPG Maker MV/MZ with rpgmpacker. A big chunk of this post is explaining CI/CD and how RPG Maker MV/MZ works, if you just want to go to the practical part click here.\nCI/CD for non-programmers RPG Maker is very non-programmer friendly, and you can easily end up not having to write a single line of code when creating a game with it. For this reason I want to make sure we all have the same base level understanding of CI/CD before continuing. That being said, I expect you to know about version control with git so make sure to watch these two amazing videos by Fireship if you are unfamiliar with it:\nLet’s get started with Continuous Integration which means running a pipeline on every change you commit to a repository. This pipeline consists of one or multiple jobs where one job could be running some tests or building the project. If you run the tests on every change then you can easily track down the commit where a bug was introduced to the codebase. A common pipeline would look like this:\nsetup (checkout, getting all the tools) running tests building the project packaging uploading an artifact (fancy word for an archive containing the output) The terminology can be different depending on your provider for example a pipeline on GitHub is called a workflow and each workflow has steps instead of jobs. They often mean the same thing so don’t let that confuse you.\nContinuous Delivery is about delivering the artifact we produced previously. This artifact can be sent to testers, friends or the QA team. Continuous Deployment is also a thing and means actually deploying the artifact by uploading the next release of a game to itch.io or deploying the software to your servers.\nBig studios often end up with huge pipelines because they have many employees and teams. They might have a CI pipeline that runs the tests and builds the project. The artifact would then send in a CD pipeline to the testers or QA team and when they approve of the build it gets released into the world. This is probably not the case for you or your team and most of the time you can combine all of this into one pipeline.\nIf you are curious how such a pipeline might look like, here is the GitHub Actions workflow file that builds (CI) and deploys (CD) this site to GitHub Pages on every push to the master branch:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 on: push: branches: [ master ] jobs: build: runs-on: ubuntu-latest steps: # setup - uses: actions/checkout@v2 with: submodules: true fetch-depth: 0 - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: 'latest' # building the site (CI) - name: Build run: hugo --minify # deploying the site (CD) - name: Deploy uses: peaceiris/actions-gh-pages@v3 with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_dir: ./public publish_branch: gh-pages RPG Maker MV/MZ manual export RPG Maker MV Deployment Window\nThis is the deployment window of RPG Maker MV which you can access in the editor under File -\u003e Deployment. The major issue with this is the fact you have to use it at all. Software developers love the tools they can use from the command line because they can be easily accessed using a script.\nOther engines like Unreal Engine have to compile code before deployment, but RPG Maker is very different: It’s only copying files from one place to another.\nThere is no code to compile because all the code is in JavaScript, it doesn’t even need to compile an executable because it just uses NW.js. RPG Maker is one of the simplest game engines, not just in terms of usability but how everything is just JSON and JavaScript. You can literally go into the js folder and look at all the source code of the engine. All the data is saved as JSON so if you want to change the name of an item you can open data/Items.json and change the values.\nIf you are curious where all those files come from, open your RPG Maker MV/MZ installation folder and look for folders that start with nw-js-. The files inside those folders are copied over to the output directory. You can also find the default template files in the NewData folders.\nSimply copying files from one place to another can be done with a script. This was exactly what rpgmpacker did in my first prototype, but I soon realized that there was more going on.\nFirst we have file filtering. For audio, you can have .ogg and .m4a files but exporting for Windows/OSX will only copy the .ogg files while exporting for Mobile will only copy .m4a files. Then we have image and audio “encryption” and the exclude-unused feature which requires parsing of almost all JSON files to figure out which files are actually in use and which are not. There is even more to this which can’t be done in a simple script, so I decided to build an entire tool which we are going to use in the pipeline.\nCreating a Release Pipeline for RPG Maker The pipeline we are going to build will do the following:\nrun rpgmpacker zip the output upload the output to itch.io using Butler If your game is not on itch.io then you can leave out the last step or replace it with an upload to MEGA, GDrive or your hosting platform of choice.\nFor the pipeline you can write a Bash or PowerShell script, just pick whatever you like more:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 #!/bin/bash INPUT=\"./MyProject\" OUTPUT=\"./build\" RPGMAKER=\"M:\\\\SteamLibrary\\\\steamapps\\\\common\\\\RPG Maker MV\" npx rpgmpacker@latest \\ --input \"$INPUT\" \\ --output \"$OUTPUT\" \\ --rpgmaker \"$RPGMAKER\" \\ --exclude \\ --noempty \\ --debug \\ --platforms \"Windows\" \"OSX\" \"Linux\" 1 2 3 4 5 6 7 8 9 10 11 12 $PROJECT=\"./MyProject\" $OUTPUT=\"./build\" $RPGMAKER=\"M:\\\\SteamLibrary\\\\steamapps\\\\common\\\\RPG Maker MV\" npx rpgmpacker@latest ` --input $PROJECT ` --output $OUTPUT ` --rpgmaker $RPGMAKER ` --exclude ` --noempty ` --debug ` --platforms \"Windows\" \"OSX\" \"Linux\" In my case I have the project in a folder called MyProject next to the script and the output should go into the build folder. I’m using the Steam version of RPG Maker MV for this but any version of MV or MZ can be used.\nNext up we want to zip the output. rpgmpacker will create an output folder for each platform you specified so for me I will have build/Windows, build/OSX and a build/Linux folder.\n1 2 3 for platform in $OUTPUT/*; do 7z a -tzip -o$OUTPUT $platform.zip $platform/* done 1 2 3 4 $Platforms = Get-ChildItem -Path $OUTPUT -Directory -Name foreach ($platform in $Platforms) { 7z a -tzip -o$OUTPUT $OUTPUT/$platform.zip $OUTPUT/$platform/* } This is where the difference between PowerShell and Bash start to appear. In Bash, we use a glob to get all top-level items of the output directory and in PowerShell we use the Get-ChildItem function. They look different, but they do the same thing with the main difference being that platform in Bash will be ./build/Windows while $platform in PowerShell will be just Windows. This is why we need to prefix $platform with $OUTPUT/ when calling 7z.\nThe pipeline is almost done at this point. Next is publishing the output with Butler to itch.io but if you are not using that platform you are now done.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # see https://broth.itch.ovh/butler ButlerChannel=\"windows-amd64\" # darwin-amd64 for Mac and linux-amd64 for Linux ButlerVersion=\"15.21.0\" ButlerOutput=\"butler-$ButlerVersion-$ButlerChannel\" if [ ! -d $ButlerOutput ]; then curl -L -o butler.zip https://broth.itch.ovh/butler/$butlerChannel/$butlerVersion/archive/default unzip -o butler.zip -d $ButlerOutput rm butler.zip else echo \"Butler version $ButlerVersion ($ButlerChannel) has already been downloaded\" fi # change butler.exe to just butler if you are on Unix butler=\"$ButlerOutput/butler.exe\" 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # see https://broth.itch.ovh/butler $ButlerChannel=\"windows-amd64\" # darwin-amd64 for Mac and linux-amd64 for Linux $ButlerVersion=\"15.21.0\" $ButlerOutput=\"butler-$ButlerVersion-$ButlerChannel\" if (![System.IO.Directory]::Exists($ButlerOutput)) { Invoke-WebRequest -OutFile butler.zip \"https://broth.itch.ovh/butler/$butlerChannel/$butlerVersion/archive/default\" Expand-Archive -Path butler.zip $ButlerOutput Remove-Item -Path butler.zip } else { Write-Output \"Butler version $ButlerVersion ($ButlerChannel) has already been downloaded\" } # change butler.exe to just butler if you are on Unix $butler=\"$ButlerOutput/butler.exe\" If you are not on Windows you should change the ButlerChannel variable to darwin-amd64 or linux-amd64 depending on your system. I recommend checking the channel list of Butler if you need something different. I’ve added a simple check, so we don’t download Butler whenever we call the script. Before we continue you should get an API key from itch.io. You should treat API keys like passwords and should never make them public. A good way of storing API keys is with environment variables and Butler expects the API key to be stored in the BUTLER_API_KEY environment variable.\n1 2 3 4 5 6 7 export BUTLER_API_KEY=\"YOUR_KEY\" ButlerProject=\"YOUR_USERNAME/YOUR_PROJECT_NAME\" ./$butler login ./$butler push $OUTPUT/Windows $ButlerProject:windows-beta ./$butler push $OUTPUT/OSX $ButlerProject:osx-beta ./$butler push $OUTPUT/Linux $ButlerProject:linux-beta 1 2 3 4 5 6 7 $env:BUTLER_API_KEY=\"YOUR_KEY\" $ButlerProject=\"YOUR_USERNAME/YOUR_PROJECT_NAME\" \u0026$butler login \u0026$butler push $OUTPUT/Windows.zip \"${ButlerProject}:windows-beta\" \u0026$butler push $OUTPUT/OSX.zip \"${ButlerProject}:osx-beta\" \u0026$butler push $OUTPUT/Linux.zip \"${ButlerProject}:linux-beta\" I recommend that you look at the Butler Docs for the different channels you can push to. To recap here are both complete scripts:\nFinished Scripts 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 #!/bin/bash INPUT=\"./MyProject\" OUTPUT=\"./build\" RPGMAKER=\"M:\\\\SteamLibrary\\\\steamapps\\\\common\\\\RPG Maker MV\" npx rpgmpacker@latest \\ --input \"$INPUT\" \\ --output \"$OUTPUT\" \\ --rpgmaker \"$RPGMAKER\" \\ --exclude \\ --noempty \\ --debug \\ --platforms \"Windows\" \"OSX\" \"Linux\" for platform in $OUTPUT/*; do 7z a -tzip -o$OUTPUT $platform.zip $platform/* done # see https://broth.itch.ovh/butler ButlerChannel=\"windows-amd64\" # darwin-amd64 for Mac and linux-amd64 for Linux ButlerVersion=\"15.21.0\" ButlerOutput=\"butler-$ButlerVersion-$ButlerChannel\" if [ ! -d $ButlerOutput ]; then curl -L -o butler.zip https://broth.itch.ovh/butler/$butlerChannel/$butlerVersion/archive/default unzip -o butler.zip -d $ButlerOutput rm butler.zip else echo \"Butler version $ButlerVersion ($ButlerChannel) has already been downloaded\" fi # change butler.exe to just butler if you are on Unix butler=\"$ButlerOutput/butler.exe\" export BUTLER_API_KEY=\"YOUR_KEY\" ButlerProject=\"YOUR_USERNAME/YOUR_PROJECT_NAME\" ./$butler login ./$butler push $OUTPUT/Windows $ButlerProject:windows-beta ./$butler push $OUTPUT/OSX $ButlerProject:osx-beta ./$butler push $OUTPUT/Linux $ButlerProject:linux-beta 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 $PROJECT=\"./MyProject\" $OUTPUT=\"./build\" $RPGMAKER=\"M:\\\\SteamLibrary\\\\steamapps\\\\common\\\\RPG Maker MV\" npx rpgmpacker@latest ` --input $PROJECT ` --output $OUTPUT ` --rpgmaker $RPGMAKER ` --exclude ` --noempty ` --debug ` --platforms \"Windows\" \"OSX\" \"Linux\" $Platforms = Get-ChildItem -Path $OUTPUT -Directory -Name foreach ($platform in $Platforms) { 7z a -tzip -o$OUTPUT $OUTPUT/$platform.zip $OUTPUT/$platform/* } # see https://broth.itch.ovh/butler $ButlerChannel=\"windows-amd64\" # darwin-amd64 for Mac and linux-amd64 for Linux $ButlerVersion=\"15.21.0\" $ButlerOutput=\"butler-$ButlerVersion-$ButlerChannel\" if (![System.IO.Directory]::Exists($ButlerOutput)) { Invoke-WebRequest -OutFile butler.zip \"https://broth.itch.ovh/butler/$butlerChannel/$butlerVersion/archive/default\" Expand-Archive -Path butler.zip $ButlerOutput Remove-Item -Path butler.zip } else { Write-Output \"Butler version $ButlerVersion ($ButlerChannel) has already been downloaded\" } # change butler.exe to just butler if you are on Unix $butler=\"$ButlerOutput/butler.exe\" $env:BUTLER_API_KEY=\"YOUR_KEY\" $ButlerProject=\"YOUR_USERNAME/YOUR_PROJECT_NAME\" \u0026$butler login \u0026$butler push $OUTPUT/Windows.zip \"${ButlerProject}:windows-beta\" \u0026$butler push $OUTPUT/OSX.zip \"${ButlerProject}:osx-beta\" \u0026$butler push $OUTPUT/Linux.zip \"${ButlerProject}:linux-beta\" Conclusion I hope this blog post helped you with getting a CI/CD pipeline up and running for your RPG Maker game. Please let me know if you end up using this tool for your next project. The author of Star Knightess Aura (NSFW) was one of the earliest users, and you can find their pipeline in this repo on gitgud.\nUnreal Engine has Automation Tools and Unity has a CLI ↩︎\n","wordCount":"2057","inLanguage":"en","datePublished":"2021-02-04T00:00:00Z","dateModified":"2022-11-29T13:34:42+01:00","author":{"@type":"Person","name":"erri120"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://erri120.github.io/posts/2021-02-04/"},"publisher":{"@type":"Organization","name":"erri120's random Blog","logo":{"@type":"ImageObject","url":"https://erri120.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://erri120.github.io accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://erri120.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://erri120.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://erri120.github.io/archives/ title=Archive><span>Archive</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://erri120.github.io>Home</a>&nbsp;»&nbsp;<a href=https://erri120.github.io/posts/>Posts</a></div><h1 class=post-title>CI/CD for RPG Maker Game Development</h1><div class=post-description>Are you working on a Game and want to automate your content delivery? RPG Maker MV/MZ have an inbuilt export option but you can't automate it so I created rpgmpacker to help you with that.</div><div class=post-meta><span title='2021-02-04 00:00:00 +0000 UTC'>2021-02-04</span>&nbsp;·&nbsp;10 min&nbsp;·&nbsp;2057 words&nbsp;·&nbsp;erri120&nbsp;|&nbsp;<a href=https://github.com/erri120/erri120.github.io/edit/master/content/posts/2021-02-04.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#cicd-for-non-programmers>CI/CD for non-programmers</a></li><li><a href=#rpg-maker-mvmz-manual-export>RPG Maker MV/MZ manual export</a></li><li><a href=#creating-a-release-pipeline-for-rpg-maker>Creating a Release Pipeline for RPG Maker</a><ul><li><a href=#finished-scripts>Finished Scripts</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details></div><div class=post-content><p>Automation saves time and therefore money. However, you have to ask yourself if it&rsquo;s worth spending hours writing a complex and long script. In the worst case you might end up wasting instead of saving time. Thankfully most programming related tasks can be automated very quickly and each language or framework often has documentation on how to get you up and running.</p><p>This is sadly not often the case when it comes to game development. Popular engines like Unreal Engine and Unity have automation tools<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> and documentation for automating the build process but less popular ones such as RPG Maker don&rsquo;t have those.</p><p>In this post I will explain what CI/CD means and how to set up a pipeline for RPG Maker MV/MZ with <a href=https://github.com/erri120/rpgmpacker>rpgmpacker</a>. A big chunk of this post is explaining CI/CD and how RPG Maker MV/MZ works, if you just want to go to the practical part click <a href=#using-rpgmpacker>here</a>.</p><h2 id=cicd-for-non-programmers>CI/CD for non-programmers<a hidden class=anchor aria-hidden=true href=#cicd-for-non-programmers>#</a></h2><p>RPG Maker is very non-programmer friendly, and you can easily end up not having to write a single line of code when creating a game with it. For this reason I want to make sure we all have the same base level understanding of CI/CD before continuing. That being said, I expect you to know about version control with git so make sure to watch these two amazing videos by <a href=https://www.youtube.com/channel/UCsBjURrPoezykLs9EqgamOA>Fireship</a> if you are unfamiliar with it:</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube-nocookie.com/embed/hwP7WQkmECE style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube-nocookie.com/embed/HkdAHXoRtos style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><p>Let&rsquo;s get started with <strong>Continuous Integration</strong> which means running a pipeline on every change you commit to a repository. This pipeline consists of one or multiple jobs where one job could be running some tests or building the project. If you run the tests on every change then you can easily track down the commit where a bug was introduced to the codebase. A common pipeline would look like this:</p><ol><li>setup (checkout, getting all the tools)</li><li>running tests</li><li>building the project</li><li>packaging</li><li>uploading an artifact (fancy word for an archive containing the output)</li></ol><p>The terminology can be different depending on your provider for example a pipeline on GitHub is called a workflow and each workflow has steps instead of jobs. They often mean the same thing so don&rsquo;t let that confuse you.</p><p><strong>Continuous Delivery</strong> is about <em>delivering</em> the artifact we produced previously. This artifact can be sent to testers, friends or the QA team. <strong>Continuous Deployment</strong> is also a thing and means actually deploying the artifact by uploading the next release of a game to itch.io or deploying the software to your servers.</p><p>Big studios often end up with huge pipelines because they have many employees and teams. They might have a CI pipeline that runs the tests and builds the project. The artifact would then send in a CD pipeline to the testers or QA team and when they approve of the build it gets released into the world. This is probably not the case for you or your team and most of the time you can combine all of this into one pipeline.</p><p>If you are curious how such a pipeline might look like, here is the GitHub Actions workflow file that builds (CI) and deploys (CD) this site to GitHub Pages on every push to the master branch:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=l>master ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># setup</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>submodules</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-hugo@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>hugo-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;latest&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># building the site (CI)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>hugo --minify</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># deploying the site (CD)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-gh-pages@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>github_token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITHUB_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>publish_dir</span><span class=p>:</span><span class=w> </span><span class=l>./public</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>publish_branch</span><span class=p>:</span><span class=w> </span><span class=l>gh-pages</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=rpg-maker-mvmz-manual-export>RPG Maker MV/MZ manual export<a hidden class=anchor aria-hidden=true href=#rpg-maker-mvmz-manual-export>#</a></h2><figure class=align-center><img loading=lazy src=/img/posts/2021-02-04/RPGMakerMV-Deployment.png#center alt="RPG Maker MV Deployment Window"><figcaption><p>RPG Maker MV Deployment Window</p></figcaption></figure><p>This is the deployment window of RPG Maker MV which you can access in the editor under <em>File -> Deployment</em>. The major issue with this is the fact you have to use it at all. Software developers love the tools they can use from the command line because they can be easily accessed using a script.</p><p>Other engines like Unreal Engine have to compile code before deployment, but RPG Maker is very different: It&rsquo;s only copying files from one place to another.</p><p>There is no code to compile because all the code is in JavaScript, it doesn&rsquo;t even need to compile an executable because it just uses <a href=https://nwjs.io/>NW.js</a>. RPG Maker is one of the simplest game engines, not just in terms of usability but how everything is just JSON and JavaScript. You can literally go into the <code>js</code> folder and look at all the source code of the engine. All the data is saved as JSON so if you want to change the name of an item you can open <code>data/Items.json</code> and change the values.</p><p>If you are curious where all those files come from, open your RPG Maker MV/MZ installation folder and look for folders that start with <code>nw-js-</code>. The files inside those folders are copied over to the output directory. You can also find the default template files in the <code>NewData</code> folders.</p><p>Simply copying files from one place to another can be done with a script. This was exactly what rpgmpacker did in my first prototype, but I soon realized that there was more going on.</p><p>First we have file filtering. For audio, you can have <code>.ogg</code> and <code>.m4a</code> files but exporting for Windows/OSX will only copy the <code>.ogg</code> files while exporting for Mobile will only copy <code>.m4a</code> files. Then we have image and audio &ldquo;encryption&rdquo; and the exclude-unused feature which requires parsing of almost all JSON files to figure out which files are actually in use and which are not. There is even more to this which can&rsquo;t be done in a simple script, so I decided to build an entire tool which we are going to use in the pipeline.</p><h2 id=creating-a-release-pipeline-for-rpg-maker>Creating a Release Pipeline for RPG Maker<a hidden class=anchor aria-hidden=true href=#creating-a-release-pipeline-for-rpg-maker>#</a></h2><p>The pipeline we are going to build will do the following:</p><ol><li>run rpgmpacker</li><li>zip the output</li><li>upload the output to itch.io using <a href=https://itch.io/docs/butler>Butler</a></li></ol><p>If your game is not on itch.io then you can leave out the last step or replace it with an upload to MEGA, GDrive or your hosting platform of choice.</p><p>For the pipeline you can write a Bash or PowerShell script, just pick whatever you like more:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=nv>INPUT</span><span class=o>=</span><span class=s2>&#34;./MyProject&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>OUTPUT</span><span class=o>=</span><span class=s2>&#34;./build&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>RPGMAKER</span><span class=o>=</span><span class=s2>&#34;M:\\SteamLibrary\\steamapps\\common\\RPG Maker MV&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>npx rpgmpacker@latest <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --input <span class=s2>&#34;</span><span class=nv>$INPUT</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --output <span class=s2>&#34;</span><span class=nv>$OUTPUT</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --rpgmaker <span class=s2>&#34;</span><span class=nv>$RPGMAKER</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --exclude <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --noempty <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --debug <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --platforms <span class=s2>&#34;Windows&#34;</span> <span class=s2>&#34;OSX&#34;</span> <span class=s2>&#34;Linux&#34;</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=nv>$PROJECT</span><span class=p>=</span><span class=s2>&#34;./MyProject&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$OUTPUT</span><span class=p>=</span><span class=s2>&#34;./build&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$RPGMAKER</span><span class=p>=</span><span class=s2>&#34;M:\\SteamLibrary\\steamapps\\common\\RPG Maker MV&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>npx</span> <span class=n>rpgmpacker</span><span class=nv>@latest</span> <span class=p>`</span>
</span></span><span class=line><span class=cl>    <span class=p>-</span><span class=n>-input</span> <span class=nv>$PROJECT</span> <span class=p>`</span>
</span></span><span class=line><span class=cl>    <span class=p>-</span><span class=n>-output</span> <span class=nv>$OUTPUT</span> <span class=p>`</span>
</span></span><span class=line><span class=cl>    <span class=p>-</span><span class=n>-rpgmaker</span> <span class=nv>$RPGMAKER</span> <span class=p>`</span>
</span></span><span class=line><span class=cl>    <span class=p>-</span><span class=n>-exclude</span> <span class=p>`</span>
</span></span><span class=line><span class=cl>    <span class=p>-</span><span class=n>-noempty</span> <span class=p>`</span>
</span></span><span class=line><span class=cl>    <span class=p>-</span><span class=n>-debug</span> <span class=p>`</span>
</span></span><span class=line><span class=cl>    <span class=p>-</span><span class=n>-platforms</span> <span class=s2>&#34;Windows&#34;</span> <span class=s2>&#34;OSX&#34;</span> <span class=s2>&#34;Linux&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>In my case I have the project in a folder called <code>MyProject</code> next to the script and the output should go into the <code>build</code> folder. I&rsquo;m using the Steam version of RPG Maker MV for this but any version of MV or MZ can be used.</p><p>Next up we want to zip the output. rpgmpacker will create an output folder for each platform you specified so for me I will have <code>build/Windows</code>, <code>build/OSX</code> and a <code>build/Linux</code> folder.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>for</span> platform in <span class=nv>$OUTPUT</span>/*<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    7z a -tzip -o<span class=nv>$OUTPUT</span> <span class=nv>$platform</span>.zip <span class=nv>$platform</span>/*
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=nv>$Platforms</span> <span class=p>=</span> <span class=nb>Get-ChildItem</span> <span class=n>-Path</span> <span class=nv>$OUTPUT</span> <span class=n>-Directory</span> <span class=n>-Name</span>
</span></span><span class=line><span class=cl><span class=k>foreach</span> <span class=p>(</span><span class=nv>$platform</span> <span class=k>in</span> <span class=nv>$Platforms</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>7z</span> <span class=n>a</span> <span class=n>-tzip</span> <span class=n>-o</span><span class=nv>$OUTPUT</span> <span class=nv>$OUTPUT</span><span class=p>/</span><span class=nv>$platform</span><span class=p>.</span><span class=py>zip</span> <span class=nv>$OUTPUT</span><span class=p>/</span><span class=nv>$platform</span><span class=p>/*</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>This is where the difference between PowerShell and Bash start to appear. In Bash, we use a glob to get all top-level items of the output directory and in PowerShell we use the <code>Get-ChildItem</code> function. They look different, but they do the same thing with the main difference being that <code>platform</code> in Bash will be <code>./build/Windows</code> while <code>$platform</code> in PowerShell will be just <code>Windows</code>. This is why we need to prefix <code>$platform</code> with <code>$OUTPUT/</code> when calling 7z.</p><p>The pipeline is almost done at this point. Next is publishing the output with <a href=https://itch.io/docs/butler>Butler</a> to itch.io but if you are not using that platform you are now done.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># see https://broth.itch.ovh/butler</span>
</span></span><span class=line><span class=cl><span class=nv>ButlerChannel</span><span class=o>=</span><span class=s2>&#34;windows-amd64&#34;</span> <span class=c1># darwin-amd64 for Mac and linux-amd64 for Linux</span>
</span></span><span class=line><span class=cl><span class=nv>ButlerVersion</span><span class=o>=</span><span class=s2>&#34;15.21.0&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>ButlerOutput</span><span class=o>=</span><span class=s2>&#34;butler-</span><span class=nv>$ButlerVersion</span><span class=s2>-</span><span class=nv>$ButlerChannel</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> ! -d <span class=nv>$ButlerOutput</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    curl -L -o butler.zip https://broth.itch.ovh/butler/<span class=nv>$butlerChannel</span>/<span class=nv>$butlerVersion</span>/archive/default
</span></span><span class=line><span class=cl>    unzip -o butler.zip -d <span class=nv>$ButlerOutput</span>
</span></span><span class=line><span class=cl>    rm butler.zip
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Butler version </span><span class=nv>$ButlerVersion</span><span class=s2> (</span><span class=nv>$ButlerChannel</span><span class=s2>) has already been downloaded&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># change butler.exe to just butler if you are on Unix</span>
</span></span><span class=line><span class=cl><span class=nv>butler</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$ButlerOutput</span><span class=s2>/butler.exe&#34;</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=c># see https://broth.itch.ovh/butler</span>
</span></span><span class=line><span class=cl><span class=nv>$ButlerChannel</span><span class=p>=</span><span class=s2>&#34;windows-amd64&#34;</span> <span class=c># darwin-amd64 for Mac and linux-amd64 for Linux</span>
</span></span><span class=line><span class=cl><span class=nv>$ButlerVersion</span><span class=p>=</span><span class=s2>&#34;15.21.0&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$ButlerOutput</span><span class=p>=</span><span class=s2>&#34;butler-</span><span class=nv>$ButlerVersion</span><span class=s2>-</span><span class=nv>$ButlerChannel</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(![</span><span class=no>System.IO.Directory</span><span class=p>]::</span><span class=n>Exists</span><span class=p>(</span><span class=nv>$ButlerOutput</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>Invoke-WebRequest</span> <span class=n>-OutFile</span> <span class=n>butler</span><span class=p>.</span><span class=py>zip</span> <span class=s2>&#34;https://broth.itch.ovh/butler/</span><span class=nv>$butlerChannel</span><span class=s2>/</span><span class=nv>$butlerVersion</span><span class=s2>/archive/default&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>Expand-Archive</span> <span class=n>-Path</span> <span class=n>butler</span><span class=p>.</span><span class=py>zip</span> <span class=nv>$ButlerOutput</span>
</span></span><span class=line><span class=cl>    <span class=nb>Remove-Item</span> <span class=n>-Path</span> <span class=n>butler</span><span class=p>.</span><span class=py>zip</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>Write-Output</span> <span class=s2>&#34;Butler version </span><span class=nv>$ButlerVersion</span><span class=s2> (</span><span class=nv>$ButlerChannel</span><span class=s2>) has already been downloaded&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># change butler.exe to just butler if you are on Unix</span>
</span></span><span class=line><span class=cl><span class=nv>$butler</span><span class=p>=</span><span class=s2>&#34;</span><span class=nv>$ButlerOutput</span><span class=s2>/butler.exe&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>If you are not on Windows you should change the <code>ButlerChannel</code> variable to <code>darwin-amd64</code> or <code>linux-amd64</code> depending on your system. I recommend checking <a href=https://broth.itch.ovh/butler>the channel list</a> of Butler if you need something different. I&rsquo;ve added a simple check, so we don&rsquo;t download Butler whenever we call the script. Before we continue you should get an API key from <a href=https://itch.io/user/settings/api-keys>itch.io</a>. You should treat API keys like passwords and should never make them public. A good way of storing API keys is with environment variables and Butler expects the API key to be stored in the <code>BUTLER_API_KEY</code> environment variable.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>BUTLER_API_KEY</span><span class=o>=</span><span class=s2>&#34;YOUR_KEY&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>ButlerProject</span><span class=o>=</span><span class=s2>&#34;YOUR_USERNAME/YOUR_PROJECT_NAME&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>./<span class=nv>$butler</span> login
</span></span><span class=line><span class=cl>./<span class=nv>$butler</span> push <span class=nv>$OUTPUT</span>/Windows <span class=nv>$ButlerProject</span>:windows-beta
</span></span><span class=line><span class=cl>./<span class=nv>$butler</span> push <span class=nv>$OUTPUT</span>/OSX <span class=nv>$ButlerProject</span>:osx-beta
</span></span><span class=line><span class=cl>./<span class=nv>$butler</span> push <span class=nv>$OUTPUT</span>/Linux <span class=nv>$ButlerProject</span>:linux-beta
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=nv>$env:BUTLER_API_KEY</span><span class=p>=</span><span class=s2>&#34;YOUR_KEY&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$ButlerProject</span><span class=p>=</span><span class=s2>&#34;YOUR_USERNAME/YOUR_PROJECT_NAME&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&amp;</span><span class=nv>$butler</span> <span class=n>login</span>
</span></span><span class=line><span class=cl><span class=p>&amp;</span><span class=nv>$butler</span> <span class=n>push</span> <span class=nv>$OUTPUT</span><span class=p>/</span><span class=n>Windows</span><span class=p>.</span><span class=py>zip</span> <span class=s2>&#34;</span><span class=nv>${ButlerProject}</span><span class=s2>:windows-beta&#34;</span>
</span></span><span class=line><span class=cl><span class=p>&amp;</span><span class=nv>$butler</span> <span class=n>push</span> <span class=nv>$OUTPUT</span><span class=p>/</span><span class=n>OSX</span><span class=p>.</span><span class=py>zip</span> <span class=s2>&#34;</span><span class=nv>${ButlerProject}</span><span class=s2>:osx-beta&#34;</span>
</span></span><span class=line><span class=cl><span class=p>&amp;</span><span class=nv>$butler</span> <span class=n>push</span> <span class=nv>$OUTPUT</span><span class=p>/</span><span class=n>Linux</span><span class=p>.</span><span class=py>zip</span> <span class=s2>&#34;</span><span class=nv>${ButlerProject}</span><span class=s2>:linux-beta&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>I recommend that you look at the <a href=https://itch.io/docs/butler/pushing.html>Butler Docs</a> for the different channels you can push to. To recap here are both complete scripts:</p><h3 id=finished-scripts>Finished Scripts<a hidden class=anchor aria-hidden=true href=#finished-scripts>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=nv>INPUT</span><span class=o>=</span><span class=s2>&#34;./MyProject&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>OUTPUT</span><span class=o>=</span><span class=s2>&#34;./build&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>RPGMAKER</span><span class=o>=</span><span class=s2>&#34;M:\\SteamLibrary\\steamapps\\common\\RPG Maker MV&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>npx rpgmpacker@latest <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --input <span class=s2>&#34;</span><span class=nv>$INPUT</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --output <span class=s2>&#34;</span><span class=nv>$OUTPUT</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --rpgmaker <span class=s2>&#34;</span><span class=nv>$RPGMAKER</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --exclude <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --noempty <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --debug <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --platforms <span class=s2>&#34;Windows&#34;</span> <span class=s2>&#34;OSX&#34;</span> <span class=s2>&#34;Linux&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> platform in <span class=nv>$OUTPUT</span>/*<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    7z a -tzip -o<span class=nv>$OUTPUT</span> <span class=nv>$platform</span>.zip <span class=nv>$platform</span>/*
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># see https://broth.itch.ovh/butler</span>
</span></span><span class=line><span class=cl><span class=nv>ButlerChannel</span><span class=o>=</span><span class=s2>&#34;windows-amd64&#34;</span> <span class=c1># darwin-amd64 for Mac and linux-amd64 for Linux</span>
</span></span><span class=line><span class=cl><span class=nv>ButlerVersion</span><span class=o>=</span><span class=s2>&#34;15.21.0&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>ButlerOutput</span><span class=o>=</span><span class=s2>&#34;butler-</span><span class=nv>$ButlerVersion</span><span class=s2>-</span><span class=nv>$ButlerChannel</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> ! -d <span class=nv>$ButlerOutput</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    curl -L -o butler.zip https://broth.itch.ovh/butler/<span class=nv>$butlerChannel</span>/<span class=nv>$butlerVersion</span>/archive/default
</span></span><span class=line><span class=cl>    unzip -o butler.zip -d <span class=nv>$ButlerOutput</span>
</span></span><span class=line><span class=cl>    rm butler.zip
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Butler version </span><span class=nv>$ButlerVersion</span><span class=s2> (</span><span class=nv>$ButlerChannel</span><span class=s2>) has already been downloaded&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># change butler.exe to just butler if you are on Unix</span>
</span></span><span class=line><span class=cl><span class=nv>butler</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$ButlerOutput</span><span class=s2>/butler.exe&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>BUTLER_API_KEY</span><span class=o>=</span><span class=s2>&#34;YOUR_KEY&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>ButlerProject</span><span class=o>=</span><span class=s2>&#34;YOUR_USERNAME/YOUR_PROJECT_NAME&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>./<span class=nv>$butler</span> login
</span></span><span class=line><span class=cl>./<span class=nv>$butler</span> push <span class=nv>$OUTPUT</span>/Windows <span class=nv>$ButlerProject</span>:windows-beta
</span></span><span class=line><span class=cl>./<span class=nv>$butler</span> push <span class=nv>$OUTPUT</span>/OSX <span class=nv>$ButlerProject</span>:osx-beta
</span></span><span class=line><span class=cl>./<span class=nv>$butler</span> push <span class=nv>$OUTPUT</span>/Linux <span class=nv>$ButlerProject</span>:linux-beta
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=nv>$PROJECT</span><span class=p>=</span><span class=s2>&#34;./MyProject&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$OUTPUT</span><span class=p>=</span><span class=s2>&#34;./build&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$RPGMAKER</span><span class=p>=</span><span class=s2>&#34;M:\\SteamLibrary\\steamapps\\common\\RPG Maker MV&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>npx</span> <span class=n>rpgmpacker</span><span class=nv>@latest</span> <span class=p>`</span>
</span></span><span class=line><span class=cl>    <span class=p>-</span><span class=n>-input</span> <span class=nv>$PROJECT</span> <span class=p>`</span>
</span></span><span class=line><span class=cl>    <span class=p>-</span><span class=n>-output</span> <span class=nv>$OUTPUT</span> <span class=p>`</span>
</span></span><span class=line><span class=cl>    <span class=p>-</span><span class=n>-rpgmaker</span> <span class=nv>$RPGMAKER</span> <span class=p>`</span>
</span></span><span class=line><span class=cl>    <span class=p>-</span><span class=n>-exclude</span> <span class=p>`</span>
</span></span><span class=line><span class=cl>    <span class=p>-</span><span class=n>-noempty</span> <span class=p>`</span>
</span></span><span class=line><span class=cl>    <span class=p>-</span><span class=n>-debug</span> <span class=p>`</span>
</span></span><span class=line><span class=cl>    <span class=p>-</span><span class=n>-platforms</span> <span class=s2>&#34;Windows&#34;</span> <span class=s2>&#34;OSX&#34;</span> <span class=s2>&#34;Linux&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>$Platforms</span> <span class=p>=</span> <span class=nb>Get-ChildItem</span> <span class=n>-Path</span> <span class=nv>$OUTPUT</span> <span class=n>-Directory</span> <span class=n>-Name</span>
</span></span><span class=line><span class=cl><span class=k>foreach</span> <span class=p>(</span><span class=nv>$platform</span> <span class=k>in</span> <span class=nv>$Platforms</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>7z</span> <span class=n>a</span> <span class=n>-tzip</span> <span class=n>-o</span><span class=nv>$OUTPUT</span> <span class=nv>$OUTPUT</span><span class=p>/</span><span class=nv>$platform</span><span class=p>.</span><span class=py>zip</span> <span class=nv>$OUTPUT</span><span class=p>/</span><span class=nv>$platform</span><span class=p>/*</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># see https://broth.itch.ovh/butler</span>
</span></span><span class=line><span class=cl><span class=nv>$ButlerChannel</span><span class=p>=</span><span class=s2>&#34;windows-amd64&#34;</span> <span class=c># darwin-amd64 for Mac and linux-amd64 for Linux</span>
</span></span><span class=line><span class=cl><span class=nv>$ButlerVersion</span><span class=p>=</span><span class=s2>&#34;15.21.0&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$ButlerOutput</span><span class=p>=</span><span class=s2>&#34;butler-</span><span class=nv>$ButlerVersion</span><span class=s2>-</span><span class=nv>$ButlerChannel</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(![</span><span class=no>System.IO.Directory</span><span class=p>]::</span><span class=n>Exists</span><span class=p>(</span><span class=nv>$ButlerOutput</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>Invoke-WebRequest</span> <span class=n>-OutFile</span> <span class=n>butler</span><span class=p>.</span><span class=py>zip</span> <span class=s2>&#34;https://broth.itch.ovh/butler/</span><span class=nv>$butlerChannel</span><span class=s2>/</span><span class=nv>$butlerVersion</span><span class=s2>/archive/default&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>Expand-Archive</span> <span class=n>-Path</span> <span class=n>butler</span><span class=p>.</span><span class=py>zip</span> <span class=nv>$ButlerOutput</span>
</span></span><span class=line><span class=cl>    <span class=nb>Remove-Item</span> <span class=n>-Path</span> <span class=n>butler</span><span class=p>.</span><span class=py>zip</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>Write-Output</span> <span class=s2>&#34;Butler version </span><span class=nv>$ButlerVersion</span><span class=s2> (</span><span class=nv>$ButlerChannel</span><span class=s2>) has already been downloaded&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># change butler.exe to just butler if you are on Unix</span>
</span></span><span class=line><span class=cl><span class=nv>$butler</span><span class=p>=</span><span class=s2>&#34;</span><span class=nv>$ButlerOutput</span><span class=s2>/butler.exe&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>$env:BUTLER_API_KEY</span><span class=p>=</span><span class=s2>&#34;YOUR_KEY&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$ButlerProject</span><span class=p>=</span><span class=s2>&#34;YOUR_USERNAME/YOUR_PROJECT_NAME&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&amp;</span><span class=nv>$butler</span> <span class=n>login</span>
</span></span><span class=line><span class=cl><span class=p>&amp;</span><span class=nv>$butler</span> <span class=n>push</span> <span class=nv>$OUTPUT</span><span class=p>/</span><span class=n>Windows</span><span class=p>.</span><span class=py>zip</span> <span class=s2>&#34;</span><span class=nv>${ButlerProject}</span><span class=s2>:windows-beta&#34;</span>
</span></span><span class=line><span class=cl><span class=p>&amp;</span><span class=nv>$butler</span> <span class=n>push</span> <span class=nv>$OUTPUT</span><span class=p>/</span><span class=n>OSX</span><span class=p>.</span><span class=py>zip</span> <span class=s2>&#34;</span><span class=nv>${ButlerProject}</span><span class=s2>:osx-beta&#34;</span>
</span></span><span class=line><span class=cl><span class=p>&amp;</span><span class=nv>$butler</span> <span class=n>push</span> <span class=nv>$OUTPUT</span><span class=p>/</span><span class=n>Linux</span><span class=p>.</span><span class=py>zip</span> <span class=s2>&#34;</span><span class=nv>${ButlerProject}</span><span class=s2>:linux-beta&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>I hope this blog post helped you with getting a CI/CD pipeline up and running for your RPG Maker game. Please let me know if you end up using this tool for your next project. The author of <a href=https://aura-dev.itch.io/star-knightess-aura>Star Knightess Aura (NSFW)</a> was one of the earliest users, and you can find their pipeline in this repo on <a href=https://gitgud.io/aura-dev/star_knightess_aura/-/tree/develop>gitgud</a>.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Unreal Engine has <a href=https://docs.unrealengine.com/4.27/en-US/ProductionPipelines/BuildTools/AutomationTool/>Automation Tools</a> and Unity has a <a href=https://docs.unity3d.com/Manual/CommandLineArguments.html>CLI</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://erri120.github.io/tags/game-development/>Game Development</a></li><li><a href=https://erri120.github.io/tags/rpg-maker/>RPG Maker</a></li><li><a href=https://erri120.github.io/tags/ci/cd/>CI/CD</a></li></ul><nav class=paginav><a class=prev href=https://erri120.github.io/posts/2021-09-29/><span class=title>« Prev</span><br><span>Don't count frames to calculate time</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share CI/CD for RPG Maker Game Development on twitter" href="https://twitter.com/intent/tweet/?text=CI%2fCD%20for%20RPG%20Maker%20Game%20Development&amp;url=https%3a%2f%2ferri120.github.io%2fposts%2f2021-02-04%2f&amp;hashtags=GameDevelopment%2cRPGMaker%2cCI%2fCD"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share CI/CD for RPG Maker Game Development on reddit" href="https://reddit.com/submit?url=https%3a%2f%2ferri120.github.io%2fposts%2f2021-02-04%2f&title=CI%2fCD%20for%20RPG%20Maker%20Game%20Development"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></div></footer><script src=https://utteranc.es/client.js repo=erri120/erri120.github.io issue-term=pathname label=site-comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2023 <a href=https://erri120.github.io>erri120's random Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>